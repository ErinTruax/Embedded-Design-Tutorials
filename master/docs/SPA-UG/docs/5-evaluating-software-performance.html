


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>	
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>		
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>	
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>		
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search" 
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a> 
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search" 
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Versal ACAP Embedded Design Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/1-getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/2-cips-noc-ip-config.html">Versal ACAP CIPS and NoC (DDR) IP Core Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/3-debugging.html">Debugging Using the Vitis Software Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/4-boot-and-config.html">Boot and Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/5-system-design-example.html">System Design Example using Scalar Engine and Adaptable Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/6-system-design-example-HSDP.html">System Design Example for High-Speed Debug Port with SmartLynq+ Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/docs/A-creating-plm.html">Appendix: Creating the PLM</a></li>
</ul>
<p class="caption"><span class="caption-text">Zynq UltraScale+ MPSoC EDT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/1-introduction.html">How Zynq UltraScale+ Devices Offer a Single Chip Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/2-getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/3-system-configuration.html">Zynq UltraScale+ MPSoC Processing System Configuration with Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/4-build-sw-for-ps-subsystems.html">Building Standalone Software for PS Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/5-debugging-with-vitis-debugger.html">Debugging Standalone Applications with the Vitis Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/6-build-linux-sw-for-ps.html">Building and Debugging Linux Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/7-design1-using-gpio-timer-interrupts.html">Design Example 1: Using GPIOs, Timers, and Interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/8-boot-and-configuration.html">Boot and Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Zynq-7000 EDT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/1-introduction.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/2-using-zynq.html">Using the Zynq SoC Processing System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/3-debugging-vitis.html">Debugging with the Vitis Software Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/4-linux-for-zynq.html">Building and Debugging Linux Applications for Zynq-7000 SoCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/5-using-gp-port-zynq.html">Using the GP Port in Zynq Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/6-using-hp-port.html">Using the HP Slave Port with AXI CDMA IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/7-linux-booting-debug.html">Linux Boot Image Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/8-custom-ip-driver-linux.html">Creating Custom IP and Device Drivers for Linux</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/SPA-UG/docs/5-evaluating-software-performance.md.txt"
						rel="nofollow">Show Source</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Evaluating Software Performance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/SPA-UG/docs/5-evaluating-software-performance.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="evaluating-software-performance">
<h1>Evaluating Software Performance<a class="headerlink" href="#evaluating-software-performance" title="Permalink to this headline">¶</a></h1>
<p>There are a number of monitoring capabilities that evaluate software
performance on a Zynq®-7000 SoC. These capabilities can inform you about the efficiency
of your application and provide visualizations for you to better
understand and optimize your software.</p>
<div class="section" id="performance-monitoring">
<h2>Performance Monitoring<a class="headerlink" href="#performance-monitoring" title="Permalink to this headline">¶</a></h2>
<p>To illustrate these performance monitoring capabilities, the BEEBS
benchmark program (see <a class="reference external" href="#chapter-2">Chapter 2: System Performance Modeling Project</a>) was run on a ZC702 target board and performance
results were captured in the Vitis™ IDE. There was no traffic driven
from the PL, so this is a software only test. Note that if you would
like to re-create these results, the software application selection is
shown in <a class="reference external" href="#_bookmark17">Chapter 4: Getting Started with SPM</a>, and the
PL traffic is shown in <a class="reference external" href="#atg-configuration">ATG Configuration</a>.
Although the results shown here are for the BEEBS benchmarks, these
exact same metrics can also be obtained for a program provided to or
compiled by the Vitis IDE.</p>
<p>There are 24 total tests performed – each of the eight benchmarks
listed in <a class="reference external" href="#_bookmark9">Table 1: BEEBS Benchmarks Provided in </a> is run on the three different data array sizes (that is, 4 KB, 64 KB, and 1024 KB). Because a sleep time
of 1s was inserted between each test, the CPU utilization gives a
clear view of when these benchmarks were run. The following figure
helps orient the timeline for the results. The three data sizes were
run from smallest to largest within each benchmark, which can be seen
in the value and length of the utilization of CPU0. It took
approximately 45s to run BEEBs benchmark without any traffic.</p>
<p><em>Figure 13:</em> CPU Utilization Labeled with BEEBS Benchmarks</p>
<p><img alt="../../_images/image131.jpeg" src="../../_images/image131.jpeg" /></p>
<p>The following figure shows four different graphs displayed by the
Vitis IDE in the PS Performance panel: CPU Utilization (%), CPU
Instructions Per Cycle, L1 Data Cache Access, and L1 Data Cache Miss
Rate (%).</p>
<p><em>Figure 14:</em> Performance Analysis of BEEBS Benchmarks - CPU Utilization, IPC, L1 Data Cache</p>
<p><img alt="../../_images/image14.jpeg" src="../../_images/image14.jpeg" /></p>
<p>While CPU utilization helps determine when benchmarks were run, the
most insightful analysis is achieved when multiple graphs are
considered. For these particular tests, the significant analysis comes
from the Instructions Per Cycle (IPC) and the L1 data cache graphs.
IPC is a well-known metric to illustrate how software interacts with
its environment, particularly the memory hierarchy. See Computer
Organization &amp; Design: The Hardware/Software Interface by David A.
Patterson and John L. Hennessy. This fact becomes evident in the
previous figure as the value of IPC follows very closely the L1 data
cache accesses. Also, during the memory-intensive matrix multipliers,
the lowest values of IPC correspond with the highest values of L1 data
cache miss rates. If IPC is a measure of software efficiency, then it
is clear from the previous figure that the lowest efficiency is during
long periods of memory-intensive computation. While sometimes this is
unavoidable, it is clear that IPC provides a good metric for this
interaction with the memory hierarchy.</p>
<p>Taking this analysis one step further, the graphs in the following
figure provide information on data locality; that is, where the
processor retrieves and writes data as it performs the specified
algorithms. A low L1 data cache miss rate means that a significant
amount of data is stored and accessed from that respective cache. A
high L1 miss rate coupled with high values in CPU write or read stall
cycles per instruction means that much of the data is coming from DDR.
As expected, an understanding of the software application aids in the
analysis. For example, the two long periods of high L1 miss rate and
CPU read stall cycles shown in the following figure are when the
floating-point and integer matrix multiplier algorithms are operating
on the 512 x 512 (256K words = 1024 KB) two-dimensional or 2-D data
array.</p>
<p><em>Figure 15:</em> Performance Analysis of BEEBS Benchmarks - L1 Data Cache, Stall Cycles Per Instruction</p>
<p><img alt="../../_images/image15.jpeg" src="../../_images/image15.jpeg" /></p>
<p>To refine the performance of an application, one option to consider
using is to enable/disable the L2 data cache prefetch. This is
specified with bit 28 of reg15_prefetch_ctrl (absolute address
0xF8F02F60). If this data prefetching is enabled, then the adjacent
cache line will also be automatically fetched. While the results shown
in <a class="reference external" href="#figure-14-performance-analysis-of-beebs-benchmarks---cpu-utilization-ipc-l1-data-cache">Figure 14: Performance Analysis of BEEBS Benchmarks - CPU Utilization, IPC, L1 Data Cache</a>
and <a class="reference external" href="#figure-15-performance-analysis-of-beebs-benchmarks---l1-data-cache-stall-cycles-per-instruction">Figure 15: Performance Analysis of BEEBS Benchmarks - L1 Data Cache, Stall Cycles Per </a> were generated with prefetch enabled, the BEEBS benchmarks were also
run with prefetch disabled. The integer matrix multiplication saw the
largest impact on software run-time with a decrease of 9.0%. While
this prefetch option can improve the performance of some applications,
it can lower the performance of others. It is recommended to verify
run-times of your application with and without this prefetch option.</p>
<p><em>Figure 16:</em> Run-Time Results of Software in BEEBS Benchmark Suite</p>
<p><img alt="../../_images/image161.png" src="../../_images/image161.png" /></p>
<p>As mentioned above, a helpful measurement of overall software
performance is the run-time of different portions of the application.
The previous figure shows a summary of run times for the eight BEEBS
benchmarks as run on the three different data array sizes (see
<a class="reference external" href="#instrumenting-hardware">Instrumenting Hardware</a> on how these run-times were
calculated and captured). The Y-axis on the left side of the previous
figure shows the full range of values, while the Y-axis on the right
side zooms in on the lowest range for clarity. As expected, the
run-times increase with larger array sizes. However, the amount of
increase varies across the different benchmarks tested. This is
because there are a number of different factors that can impact
run-time, including the amount of data, data locality, and algorithmic
dependencies on data size. As far as data locality, the 4 KB, 64 KB,
and 1024 KB data arrays fit into the L1 data cache, L2 data cache, and
DDR, respectively.</p>
<p>For more information on assessing the performance of the memory
hierarchy, see <a class="reference external" href="#chapter-8">Chapter 8: Evaluating Memory Hierarchy and the ACP</a>.</p>
</div>
<div class="section" id="visualizing-performance-improvements">
<h2>Visualizing Performance Improvements<a class="headerlink" href="#visualizing-performance-improvements" title="Permalink to this headline">¶</a></h2>
<p>As shown in <a class="reference external" href="#figure-16-run-time-results-of-software-in-beebs-benchmark-suite">Figure 16: Run-Time Results of Software in BEEBS Benchmark Suite</a>
the longest run- times are clearly the matrix
multiplications,especially for the largest array size. What if these
run- times need to be improved? How would the performance analysis
features in the Vitis IDE help measure and visualize any code
optimizations or improvements?</p>
<p>The sample code below shows two different C/C++ implementations for
floating-point matrix multiplication. The original and traditional
implementation is the <code class="docutils literal notranslate"><span class="pre">Multiply_Old()</span></code> function, whereas a newer
implementation is contained in <code class="docutils literal notranslate"><span class="pre">Multiply_New()</span></code>. While the newer
implementation appears to be more complicated, it takes advantage of
the 32 byte cache lines. See <a class="reference external" href="http://www.cs.bgu.ac.il/%7Eos142/wiki.files/drepper-2007.pdf">What Every Programmer Should Know About Memory</a>
by Ulrich Drepper. The original and modified C/C++ software for
floating-point matrix multiplication is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define CLS 32</span>
<span class="c1">#define SM	(CLS / sizeof (float))</span>
<span class="o">/*</span> <span class="n">Original</span> <span class="n">method</span> <span class="n">of</span> <span class="n">calculating</span> <span class="n">floating</span><span class="o">-</span><span class="n">point</span> <span class="n">matrix</span> <span class="n">multiplication</span> <span class="o">*/</span> 
<span class="n">void</span> <span class="n">Multiply_Old</span><span class="p">(</span><span class="nb">float</span> <span class="o">**</span><span class="n">A</span><span class="p">,</span> <span class="nb">float</span> <span class="o">**</span><span class="n">B</span><span class="p">,</span> <span class="nb">float</span> <span class="o">**</span><span class="n">Res</span><span class="p">,</span> <span class="n">long</span> <span class="n">dim</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Index</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">Index</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">Index</span><span class="p">]</span> <span class="o">*</span> <span class="n">B</span><span class="p">[</span><span class="n">Index</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="o">/*</span> <span class="n">Modified</span> <span class="n">method</span> <span class="n">of</span> <span class="n">calculating</span> <span class="n">floating</span><span class="o">-</span><span class="n">point</span> <span class="n">matrix</span> <span class="n">multiplication</span> <span class="o">*/</span> 
<span class="n">void</span> <span class="n">Multiply_New</span><span class="p">(</span><span class="nb">float</span> <span class="o">**</span><span class="n">A</span><span class="p">,</span> <span class="nb">float</span> <span class="o">**</span><span class="n">B</span><span class="p">,</span> <span class="nb">float</span> <span class="o">**</span><span class="n">Res</span><span class="p">,</span> <span class="n">long</span> <span class="n">dim</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">SM</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="n">SM</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">dim</span><span class="p">;</span> <span class="n">k</span> <span class="o">+=</span> <span class="n">SM</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nb">float</span> <span class="o">*</span><span class="n">rres</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">Res</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span> <span class="nb">float</span> <span class="o">*</span><span class="n">rmul1</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">];</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i2</span> <span class="o">&lt;</span> <span class="n">SM</span><span class="p">;</span> <span class="o">++</span><span class="n">i2</span><span class="p">,</span> <span class="n">rres</span> <span class="o">+=</span> <span class="n">dim</span><span class="p">,</span> <span class="n">rmul1</span> <span class="o">+=</span> <span class="n">dim</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nb">float</span> <span class="o">*</span><span class="n">rmul2</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
                        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">k2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k2</span> <span class="o">&lt;</span> <span class="n">SM</span><span class="p">;</span> <span class="o">++</span><span class="n">k2</span><span class="p">,</span> <span class="n">rmul2</span> <span class="o">+=</span> <span class="n">dim</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">j2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j2</span> <span class="o">&lt;</span> <span class="n">SM</span><span class="p">;</span> <span class="o">++</span><span class="n">j2</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="n">rres</span><span class="p">[</span><span class="n">j2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">rmul1</span><span class="p">[</span><span class="n">k2</span><span class="p">]</span> <span class="o">*</span> <span class="n">rmul2</span><span class="p">[</span><span class="n">j2</span><span class="p">];</span>
</pre></div>
</div>
<p>The BEEBS benchmark software was re-compiled and re-run using the new
implementations for both floating-point and integer matrix
multiplications. The following table lists a summary of the
performance metrics reported for CPU0 in the APU Performance Summary
panel in the Vitis IDE. Even though only two of the eight benchmarks
were modified, there was a noticeable difference in the reported
metrics. The average IPC value increased by 34.9%, while there was a
substantial drop in L1 data cache miss rate. The read stall cycles
also decreased dramatically, revealing the reduction in clock cycles
when the CPU is waiting on a data cache refill.</p>
<p><em>Table 5:</em> <strong>CPU0 Performance Summary with Original and Modified Matrix Multipliers</strong></p>
<table>
<thead>
<tr class="header">
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2"><strong>Performance Metric</strong>
</td>
<td colspan="3"><strong>CPU0 Performance Summary</strong>
</td>
</tr>
<tr><td><strong>Original</strong>
</td>
<td><strong>Modified</strong></td>
<td><strong>Changes</strong>
</td>
</tr>
<tr >
<td>CPU Utilization (%)</td>
<td>
<p>100.00</p>
</td>
<td>
<p>100.00</p>
</td>
<td>
<p>≈</p>
</td>
</tr>
<tr>
<td>CPU Instructions Per Cycle</td>
<td>
<p>0.43</p>
</td>
<td>
<p>0.58</p>
</td>
<td>
<p>↑</p>
</td>
</tr>
<tr >
<td>L1 Data Cache Miss Rate (%)</td>
<td>
<p>8.24</p>
</td>
<td>
<p>0.64</p>
</td>
<td>
<p>↓↓</p>
</td>
</tr>
<tr>
<td>L1 Data Cache Accesses</td>
<td>
<p>3484.33M</p>
</td>
<td>3653.48M</td>
<td>
<p>≈</p>
</td>
</tr>
<tr >
<td>CPU Write Stall Cycles Per Instruction</td>
<td>
<p>0.00</p>
</td>
<td>
<p>0.00</p>
</td>
<td>
<p>≈</p>
</td>
</tr>
<tr>
<td>
<p>CPU Read Stall Cycles Per Instruction</p>
</td>
<td>
<p>0.79</p>
</td>
<td>
<p>0.05</p>
</td>
<td>
<p>↓↓</p>
</td>
</tr>
</tbody>
</table><p>The following figure shows the L1 data cache graphs and CPU stall
cycles per instruction reported in the PS Performance panel. In
contrast to <a class="reference external" href="#figure-15-performance-analysis-of-beebs-benchmarks---l1-data-cache-stall-cycles-per-instruction">Figure 15: Performance Analysis of BEEBS Benchmarks - L1 Data Cache, Stall Cycles Per Instruction</a>, it becomes clear that the bottlenecks of the code – the
floating-point and integer matrix multiplications – have been
dramatically improved. The long periods of low IPC, high L1 data cache
miss rate, and high CPU read stall cycles toward the end of the
capture have been shortened and improved considerably.</p>
<p><em>Figure 17:</em> Performance Analysis of BEEBS Benchmarks with Improved Matrix Multipliers</p>
<p><img alt="../../_images/image17.jpeg" src="../../_images/image17.jpeg" /></p>
<p>This is confirmed with software run times. A summary of the measured
run-times is also listed in the following table. The run-times of the
floating-point and integer matrix multiplications were reduced to
22.8% and 17.0% of their original run-times, respectively.</p>
<p><em>Table 6:</em> <strong>Summary of Software Run-Times for Original and Modified Matrix Multipliers</strong></p>
<table>
<thead>
<tr class="header">
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2"><p><strong>Benchmark</strong></p>
</td>
<td colspan="2"><p><strong>Software Run-Times (ms)</strong></p>
</td>
</tr>
<tr class="even"><td>
<p><strong>Original</strong></p>
</td>
<td>
<p><strong>Modified</strong></p>
</td>
</tr>
<tr class="odd">
<td>Floating-point matrix multiplication</td>
<td>
<p>9201.70</p>
</td>
<td>
<p>2100.36</p>
</td>
</tr>
<tr class="even">
<td></td>
<td>
<p>100.0%</p>
</td>
<td>
<p>22.8%</p>
</td>
</tr>
<tr class="odd">
<td>Integer matrix multiplication</td>
<td>
<p>8726.67</p>
</td>
<td>
<p>1483.24</p>
</td>
</tr>
<tr class="even">
<td></td>
<td>
<p>100.0%</p>
</td>
<td>
<p>17.0%</p>
</td>
</tr>
</tbody>
</table></div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
  </div>	  
      </div>
    </section>


  




  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>     	    
	    
	    
  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>