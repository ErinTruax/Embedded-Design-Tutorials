


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/Zynq7000-EDT/docs/3-using-gp-port-zynq.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using the GP Port in Zynq Devices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Zynq7000-EDT/docs/3-using-gp-port-zynq.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="right">
            Read this page in other languages:<a href="../docs-jp/3-using-gp-port-zynq.md">日本語</a>    <table style="width:100%"><table style="width:100%">
  <tr><th width="100%" colspan="6"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Zynq-7000 SoC Embedded Design Tutorial 2020.2 (UG1165)</h1>
</th>  </tr>
  <tr>
    <td width="33%" align="center"><a href="../README.md">1. Introduction</a></td>
    <td width="33%" align="center"><a href="2-using-zynq.md">2. Using the Zynq SoC Processing System</a></td>
    <td width="33%" align="center">3. Using the GP Port in Zynq Devices</td>
</tr>
<tr><td width="33%" align="center"><a href="4-debugging-vitis.md">4. Debugging with the Vitis Software Platform</a></td>
    <td width="33%" align="center"><a href="5-using-hp-port.md">5. Using the HP Slave Port with AXI CDMA IP</a></td>
    <td width="33%" align="center"><a href="6-linux-booting-debug.md">6. Linux Booting and Debug in the Vitis Software Platform</a></td>
  </tr>
  <tr>
      <td width="33%" align="center"><a href="7-custom-ip-driver-linux.md">7. Creating Custom IP and Device Driver for Linux
  </a></td>
      <td width="33%" align="center"><a href="8-sw-profiling.md">8. Software Profiling Using the Vitis Software Platform</a></td>    
      <td width="33%" align="center"><a href="9-linux-aware-debugging.md">9. Linux Aware Debugging</a></td>    
    </tr>
</table><ul class="simple">
<li><p><a class="reference external" href="#using-the-gp-port-in-zynq-devices">Using the GP Port in Zynq Devices</a></p>
<ul>
<li><p><a class="reference external" href="#adding-ip-in-pl-to-the-zynq-soc-processing-system">Adding IP in PL to the Zynq SoC Processing System</a></p></li>
<li><p><a class="reference external" href="#example-project-validate-instantiated-fabric-ip-functionality">Example Project: Validate Instantiated Fabric IP Functionality</a></p></li>
<li><p><a class="reference external" href="#working-with-the-vitis-software-platform">Working with the Vitis Software Platform</a></p></li>
<li><p><a class="reference external" href="#standalone-application-software-for-the-design">Standalone Application Software for the Design</a></p>
<ul>
<li><p><a class="reference external" href="#application-software-steps">Application Software Steps</a></p>
<ul>
<li><p><a class="reference external" href="#application-software-code">Application Software Code</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="using-the-gp-port-in-zynq-devices">
<h1>Using the GP Port in Zynq Devices<a class="headerlink" href="#using-the-gp-port-in-zynq-devices" title="Permalink to this headline">¶</a></h1>
<p>One of the unique features of using the Xilinx® Zynq®-7000 SoC as an
embedded design platform is in using the Zynq SoC processing system
(PS) for its Arm Cortex-A9 dual core processing system as well as the
programmable logic (PL) available on it.</p>
<p>In this chapter, you will create a design with:</p>
<ul class="simple">
<li><p>AXI GPIO and AXI Timer in fabric (PL) with interrupt from fabric to
PS section</p></li>
<li><p>Zynq SoC PS GPIO pin connected to the fabric (PL) side pin using the
EMIO interface</p></li>
</ul>
<p>The flow of this chapter is similar to that in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a> and uses the Zynq device as a
base hardware design. It is assumed that you understand the concepts
discussed in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a> regarding adding the Zynq device into a Vivado IP
integrator block diagram design. If you skipped that chapter, you
might want to look at it because we will continually refer to it throughout this chapter.</p>
<div class="section" id="adding-ip-in-pl-to-the-zynq-soc-processing-system">
<h2>Adding IP in PL to the Zynq SoC Processing System<a class="headerlink" href="#adding-ip-in-pl-to-the-zynq-soc-processing-system" title="Permalink to this headline">¶</a></h2>
<p>There is no restriction on the complexity of an intellectual property
(IP) that can be added in fabric to be tightly coupled with the Zynq®
SoC PS. This section covers a simple example with the AXI GPIO, AXI
Timer with interrupt, and the PS section GPIO pin connected to PL side
pin using the EMIO interface.</p>
<p>In this section, you will create a design to check the functionality
of the AXI GPIO, AXI Timer with interrupt instantiated in fabric, and
PS section GPIO with EMIO interface. The block diagram for the system
is as shown in the following figure.</p>
<p><img alt="../../_images/image381.jpeg" src="../../_images/image381.jpeg" /></p>
<p>You can use the system created in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a> and continue after <a class="reference external" href="2-using-zynq.md#creating-an-embedded-processor-project">Creating an Embedded Processor Project</a>.</p>
<p>In the examples in this chapter, we will expand on the design in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a>. You will make the following design changes:</p>
<ul class="simple">
<li><p>The fabric-side AXI GPIO is assigned a 1-bit channel width and is
connected to the SW5 push- button switch on the ZC702 board.</p></li>
<li><p>The PS GPIO ports are modified to include a 1-bit interface that
routes a fabric pin (via the EMIO interface) to the SW7
push-button switch on the board.</p></li>
<li><p>In the PS section, another 1-bit GPIO is connected to the DS23 LED
on the board, which is on the MIO port.</p></li>
<li><p>The AXI timer interrupt is connected from fabric to the PS section
interrupt controller. The timer starts when you press any of the
selected push buttons on the board. After the timer expires, the
timer interrupt is triggered.</p></li>
<li><p>Along with making the above hardware changes, you will write the
application software code. The code will function as follows:</p>
<ul>
<li><p>A message appears in the serial terminal and asks you to select
the push button switch to use on the board (either SW7 or
SW5).</p></li>
<li><p>When the appropriate button is pressed, the timer automatically
starts, switches LED DS23 OFF, and waits for the timer
interrupt to happen.</p></li>
<li><p>After the timer interrupt, LED DS23 switches ON and execution
starts again and waits for you to select the push button
switch in the serial terminal again.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="example-project-validate-instantiated-fabric-ip-functionality">
<h2>Example Project: Validate Instantiated Fabric IP Functionality<a class="headerlink" href="#example-project-validate-instantiated-fabric-ip-functionality" title="Permalink to this headline">¶</a></h2>
<p>In this example, you will add the AXI GPIO, AXI Timer, the interrupt
instantiated in fabric, and the EMIO interface. You will then validate
the fabric additions.</p>
<ol>
<li><p>Open the Vivado® Design Suite.</p></li>
<li><p>Under the Recent Projects column, click the <strong>edt_tutorial</strong> design
that you created in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a>.</p></li>
<li><p>Under <strong>IP Integrator</strong>, click <strong>Open Block Design</strong>.</p></li>
<li><p>In the Diagram window, right-click in the blank space and select
<strong>Add IP</strong>.</p></li>
<li><p>In the search box, type AXI GPIO and double-click the <strong>AXI GPIO</strong>
IP to add it to the block design. The AXI GPIO IP block appears in
the Diagram window.</p></li>
<li><p>In the Diagram window, right-click in the blank space and select
<strong>Add IP</strong>.</p></li>
<li><p>In the search box, type AXI Timer and double-click the <strong>AXI Timer</strong>
IP to add it to the block design. The AXI Timer IP block appears
in the Diagram view.</p></li>
<li><p>You must also edit the EMIO configuration of the ZYNQ7 SoC
processing system and enable interrupts. Right-click the <strong>ZYNQ7
Processing System</strong> IP block and select <strong>Customize Block</strong>.</p>
<p><strong><em>Note</em>:</strong> You can also double-click the IP block to customize.</p>
<p>The Re-customize IP dialog box opens, as shown in the following figure.</p>
<p><img alt="../../_images/image39.jpeg" src="../../_images/image39.jpeg" /></p>
</li>
<li><p>Click <strong>MIO Configuration</strong>.</p></li>
<li><p>Expand <strong>I/O Peripherals→ GPIO</strong> and select the <strong>EMIO GPIO
(Width)</strong> check box.</p></li>
<li><p>Change the EMIO GPIO (Width) to <strong>1</strong>.</p></li>
<li><p>Navigate to Interrupts→ Fabric Interrupts→ PL-PS Interrupt Ports.</p></li>
<li><p>Check the <strong>Fabric Interrupts</strong> box and also check
<strong>IRQ_F2P[15:0]</strong> to enable PL-PS interrupts in the IP core.</p></li>
<li><p>Click <strong>OK</strong> to accept the changes to the ZYNQ7 Processing System
IP. The diagram looks like the following figure.</p>
<p><img alt="../../_images/image40.png" src="../../_images/image40.png" /></p>
</li>
<li><p>Click the <strong>Run Connection Automation</strong> link at the top of the page
to automate the connection process for the newly added IP blocks.</p></li>
<li><p>In the Run Connection Automation dialog box, select the check box next to <strong>All Automation</strong>, as shown in the following figure.</p>
<p><img alt="../../_images/image411.jpeg" src="../../_images/image411.jpeg" /></p>
</li>
<li><p>Click <strong>OK</strong>.</p>
<p>Upon completion, the updated diagram looks like the following figure.</p>
<p><img alt="../../_images/image42.png" src="../../_images/image42.png" /></p>
</li>
<li><p>Right-click the <strong>AXI GPIO</strong> IP block and select <strong>Customize
Block</strong>.</p>
<p><strong><em>Note</em>:</strong> You can also double-click the IP block to make
customizations.</p>
</li>
<li><p>Under the <strong>Board</strong> page, make sure that both <strong>GPIO</strong> and <strong>GPIO2</strong>
are set to <strong>Custom</strong>.</p></li>
<li><p>Select the <strong>IP Configuration</strong> page. In the GPIO section, change
the <strong>GPIO Width</strong> to <strong>1</strong> because you only need one GPIO port.
Also ensure that <strong>All Inputs</strong> and <strong>All Outputs</strong> are both
unchecked.</p></li>
<li><p>Click <strong>OK</strong> to accept the changes.</p></li>
<li><p>Notice that the Interrupt port is not automatically connected to the
AXI Timer IP Core. In the Block Diagram view, locate the
IRQ_F2P[0:0] port on the ZYNQ7 Processing System.</p></li>
<li><p>Scroll your mouse over the connector port until the pencil button
appears, then click the <strong>IRQ_F2P[0:0]</strong> port and drag to the
<strong>interrupt</strong> output port on the AXI Timer IP core to make a
connection between the two ports.</p></li>
<li><p>Notice that the ZYNQ7 Processing System GPIO_0 port is not
connected. Right-click the <strong>GPIO_0</strong> output port on the <strong>ZYNQ7 Processing System</strong> and select <strong>Make External</strong>.</p>
<p>The pins are external but do not have the needed constraints for our
board. To constrain your hardware pins to specific device locations,
follow the steps below. These steps can be used for any manual pin
placements.</p>
</li>
<li><p>Click <strong>Open Elaborated Design</strong> under RTL Analysis in the Flow
Navigator view.</p>
<p><img alt="../../_images/image431.jpeg" src="../../_images/image431.jpeg" /></p>
</li>
<li><p>When the Elaborate Design message box opens, as shown in the following figure, click <strong>OK</strong>.</p>
<p><img alt="../../_images/image441.jpeg" src="../../_images/image441.jpeg" /></p>
<p><strong>TIP:</strong> <em>The design might take a few minutes to elaborate. If you
want to do something else in Vivado while the design elaborates, you
can click the <strong>Background</strong> button to have Vivado continue running
the process in the background.</em></p>
</li>
<li><p>Select <strong>I/O Planning</strong> from the drop-down menu, as shown in the following figure, to display the <strong>I/O Ports</strong> window.</p>
<p><img alt="../../_images/image45.jpeg" src="../../_images/image45.jpeg" /></p>
</li>
<li><p>Under the I/O Ports window at the bottom of the Vivado window (as
seen in the following figure), expand the <strong>GPIO_0_0_18048</strong> and
<strong>gpio_sw_18048</strong> ports to check the site (pin) map.</p>
<p><img alt="../../_images/image47.jpeg" src="../../_images/image47.jpeg" /></p>
</li>
<li><p>Find <strong>GPIO_0_0_tri_io[0]</strong> and set the following properties,
shown in the following figure:</p>
<ul class="simple">
<li><p>Package Pin = F19</p></li>
<li><p>I/O Std = LVCMOS25</p></li>
</ul>
</li>
<li><p>Find <strong>gpio_sw_tri_io[0]</strong> and set the following properties, shown
in the following figure:</p>
<ul class="simple">
<li><p>Package Pin = G19</p></li>
<li><p>I/O Std = LVCMOS25</p></li>
</ul>
<p><img alt="../../_images/image481.png" src="../../_images/image481.png" /></p>
<p><strong><em>Note</em>:</strong> For additional information about creating other design
constraints, refer to the <em>Vivado Design Suite User Guide: Using
Constraints</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bd%3Dug903-vivado-using-constraints.pdf">UG903</a>).</p>
</li>
<li><p>In the Flow Navigator, under Program and Debug, select <strong>Generate
Bitstream</strong>.</p>
<p>The Save Project view opens. Make sure the <strong>Elaborated Design -
constrs_1</strong> check box is selected and click <strong>Save</strong>.</p>
<p>A message might appear that states that synthesis is out of date. If
this happens, click <strong>Yes</strong>.</p>
</li>
<li><p>The Save Constraints dialog box appears (shown in the following
figure). Provide a file name (GPIO_Constraints) and click <strong>OK</strong>.
If the Synthesis is Out-of-date dialog box opens, click <strong>Yes</strong> to
rerun synthesis. The Launch Runs dialog box opens. Click <strong>OK</strong> to
launch synthesis.</p>
<p><img alt="../../_images/image491.png" src="../../_images/image491.png" /></p>
<p>A constraints file is created and saved under the <strong>Constraints</strong>
folder on the <strong>Hierarchy</strong> view of the <strong>Sources</strong> window.</p>
<p><img alt="../../_images/image50.jpeg" src="../../_images/image50.jpeg" /></p>
</li>
<li><p>After bitstream generation completes, export the hardware using
<strong>File→ Export → Export Hardware</strong>. Use the information in the
table below to make selections in each of the wizard screens.
Click <strong>Next</strong> where necessary.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Export Hardware Platform</td>
<td>Platform type</td>
<td>Fixed</td>
</tr>
<tr class="even">
<td>Output</td>
<td></td>
<td>Include bitstream</td>
</tr>
</tbody>
</table><table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Files</td>
<td>XSA file name</td>
<td>Leave as tutorial_bd_wrapper</td>
</tr>
<tr class="even">
<td></td>
<td><strong>Export to</strong></td>
<td>Leave as C:/designs/ edt_tutorial</td>
</tr>
</tbody>
</table><p><strong><em>Note</em>:</strong> If a pop-up appears saying the module is already exported,
click <strong>Yes</strong>.</p>
</li>
<li><p>Click <strong>Finish</strong> as shown in the following figure.</p>
<p><img alt="../../_images/image511.jpeg" src="../../_images/image511.jpeg" /></p>
</li>
</ol>
</div>
<div class="section" id="working-with-the-vitis-software-platform">
<h2>Working with the Vitis Software Platform<a class="headerlink" href="#working-with-the-vitis-software-platform" title="Permalink to this headline">¶</a></h2>
<p>Open the Vitis IDE and manually update the exported hardware from
Vivado.</p>
<ol>
<li><p>In the Explorer view, right-click on the <strong>hw_platform</strong> platform
project and click on the <strong>Update Hardware Specification</strong> option
as shown in the following figure.</p>
<p><img alt="../../_images/image521.png" src="../../_images/image521.png" /></p>
</li>
<li><p>In the Update Hardware Specification view, browse for the exported XSA file (C:/designs/edt_tutorial/tutorial_bd_wrapper.xsa) from Vitis and click <strong>OK</strong>. A view opens stating that the hardware specification for the platform project has been updated, as shown in the following figure. Click <strong>OK</strong>.</p>
<p><img alt="../../_images/image53.jpeg" src="../../_images/image53.jpeg" /></p>
</li>
<li><p>Rebuild the out-of-date platform project. Right-click the
<strong>hw_platform</strong> project. Select <strong>Clean Project</strong> followed by
<strong>Build Project</strong>.</p></li>
<li><p>After the hw_platform project build completes, the hw_platform.xpfm
file is generated, as shown in the following figure.</p>
<p><img alt="../../_images/image541.jpeg" src="../../_images/image541.jpeg" /></p>
</li>
<li><p>Open the helloworld.c file from the hello_world project created with
standalone PS in <a href="2-using-zynq.md">Using the
Zynq SoC Processing System</a> and modify the application software code.</p></li>
<li><p>Save the file and re-build the project.</p></li>
<li><p>Open the serial communication utility with baud rate set to
<strong>115200</strong>.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Connect to the board. Because you have a bitstream for the PL fabric, you must download the bitstream.</p></li>
<li><p>Select <strong>Xilinx → Program FPGA</strong>. The Program FPGA view opens.
Browse for the bitstream exported from Vivado.</p>
<p><img alt="../../_images/image55.png" src="../../_images/image55.png" /></p>
</li>
<li><p>Click <strong>Program</strong> to download the bitstream and program the PL
fabric. When the FPGA programming is done, progress information
pop up opens and shows the status as FPGA configuration complete.</p></li>
<li><p>Run the project similar to the steps in
<a class="reference external" href="2-using-zynq.md#creating-a-platform-project-in-the-vitis-software-platform-with-an-xsa-from-vivado">Creating a Platform Project in the Vitis Software Platform with an XSA from Vivado</a>.</p>
<p>If steps 9 and 10 fail, open the <strong>Run Configurations</strong> view,
browse for the bitstream file exported by Vivado, and then click
the <strong>Run</strong> button as shown in following figure. With this step,
the FPGA is programmed and the application runs.</p>
<p><img alt="../../_images/image561.jpeg" src="../../_images/image561.jpeg" /></p>
</li>
<li><p>In the system, the AXI GPIO pin is connected to push button <strong>SW5</strong>
on the board, and the PS section GPIO pin is connected to push
button <strong>SW7</strong> on the board via an EMIO interface.</p></li>
<li><p>Follow the instructions printed on the serial terminal to run the
application. See the following figure for serial output logs.</p>
<p><img alt="../../_images/image57.png" src="../../_images/image57.png" /></p>
</li>
</ol>
</div>
<div class="section" id="standalone-application-software-for-the-design">
<h2>Standalone Application Software for the Design<a class="headerlink" href="#standalone-application-software-for-the-design" title="Permalink to this headline">¶</a></h2>
<p>The system you designed in this chapter requires application software
for the execution on the board. This section describes the details
about the application software.</p>
<p>The main() function in the application software is the entry point for
the execution. This function includes initialization and the required
settings for all peripherals connected in the system. It also has a
selection procedure for the execution of the different use cases, such
as AXI GPIO and PS GPIO using EMIO interface. You can select different
use cases by following the instruction on the serial terminal.</p>
<div class="section" id="application-software-steps">
<h3>Application Software Steps<a class="headerlink" href="#application-software-steps" title="Permalink to this headline">¶</a></h3>
<p>Application software is composed of the following steps:</p>
<ol>
<li><p>Initialize the AXI GPIO module.</p></li>
<li><p>Set a direction control for the AXI GPIO pin as an input pin, which
is connected with the <strong>SW5</strong> push button on the board. The
location is fixed via LOC constraint in the user constraint file
(XDC) during system creation.</p></li>
<li><p>Initialize the AXI TIMER module with device ID 0.</p></li>
<li><p>Associate a timer callback function with AXI timer ISR.</p>
<p>This function is called every time the timer interrupt happens. This
callback switches on the LED <strong>DS23</strong> on the board and sets the
interrupt flag.</p>
<p>The main() function uses the interrupt flag to halt execution, waits
for timer interrupt to happen, and then restarts the execution.</p>
</li>
<li><p>Set the reset value of the timer, which is loaded to the timer
during reset and timer starts.</p></li>
<li><p>Set timer options such as Interrupt mode and Auto Reload mode.</p></li>
<li><p>Initialize the PS section GPIO.</p></li>
<li><p>Set the PS section GPIO, channel 0, pin number 10 to the output pin,
which is mapped to the MIO pin and physically connected to the LED
<strong>DS23</strong> on the board.</p></li>
<li><p>Set PS Section GPIO channel number 2, pin number 0, to an input pin,
which is mapped to PL side pin via the EMIO interface and
physically connected to the <strong>SW7</strong> push button switch.</p></li>
<li><p>Initialize Snoop control unit Global Interrupt controller. Also,
register Timer interrupt routine to interrupt ID ‘91’, register
the exceptional handler, and enable the interrupt.</p></li>
<li><p>Execute a sequence in the loop to select between AXI GPIO or PS GPIO
use case via serial terminal.</p>
<p>The software accepts your selection from the serial terminal and
executes the procedure accordingly. After the selection of the use
case via the serial terminal, you must press a push button on the
board as per the instruction on terminal. This action switches off the
LED DS23, starts the timer, and tells the function to wait infinitely
for the Timer interrupt to happen. After the Timer interrupt happens,
LED DS23 switches ON and restarts execution.</p>
</li>
</ol>
<div class="section" id="application-software-code">
<h4>Application Software Code<a class="headerlink" href="#application-software-code" title="Permalink to this headline">¶</a></h4>
<p>The Application software for the system is included in helloworld.c,
which is available in the ZIP file that accompanies this guide. For
more details, see <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This Tutorial</a>.</p>
<p>© Copyright 2015–2020 Xilinx, Inc.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 19, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>