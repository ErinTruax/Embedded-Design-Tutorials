


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/Zynq7000-EDT/docs/5-using-hp-port.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using the HP Slave Port with AXI CDMA IP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Zynq7000-EDT/docs/5-using-hp-port.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="right">
            Read this page in other languages:<a href="../docs-jp/5-using-hp-port.md">日本語</a>    <table style="width:100%"><table style="width:100%">
  <tr><th width="100%" colspan="6"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Zynq-7000 SoC Embedded Design Tutorial 2020.2 (UG1165)</h1>
</th>  </tr>
  <tr>
    <td width="33%" align="center"><a href="../README.md">1. Introduction</a></td>
    <td width="33%" align="center"><a href="2-using-zynq.md">2. Using the Zynq SoC Processing System</a></td>
    <td width="33%" align="center"><a href="3-using-gp-port-zynq.md">3. Using the GP Port in Zynq Devices</a></td>
</tr>
<tr><td width="33%" align="center"><a href="4-debugging-vitis.md">4. Debugging with the Vitis Software Platform</a></td>
    <td width="33%" align="center">5. Using the HP Slave Port with AXI CDMA IP</td>
    <td width="33%" align="center"><a href="6-linux-booting-debug.md">6. Linux Booting and Debug in the Vitis Software Platform</a></td>
  </tr>
  <tr>
      <td width="33%" align="center"><a href="7-custom-ip-driver-linux.md">7. Creating Custom IP and Device Driver for Linux
  </a></td>
      <td width="33%" align="center"><a href="8-sw-profiling.md">8. Software Profiling Using the Vitis Software Platform</a></td>    
      <td width="33%" align="center"><a href="9-linux-aware-debugging.md">9. Linux Aware Debugging</a></td>    
    </tr>
</table><ul class="simple">
<li><p><a class="reference external" href="#using-the-hp-slave-port-with-axi-cdma-ip">Using the HP Slave Port with AXI CDMA IP</a></p>
<ul>
<li><p><a class="reference external" href="#integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port">Integrating AXI CDMA with the Zynq SoC PS HP Slave Port</a></p></li>
<li><p><a class="reference external" href="#example-project-integrating-axi-cdma-with-the-ps-hp-slave-port">Example Project: Integrating AXI CDMA with the PS HP Slave Port</a></p>
<ul>
<li><p><a class="reference external" href="#standalone-application-software-for-the-design">Standalone Application Software for the Design</a></p>
<ul>
<li><p><a class="reference external" href="#application-software-flow">Application Software Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#running-the-standalone-cdma-application-using-the-vitis-software-platform">Running the Standalone CDMA Application Using the Vitis Software Platform</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#linux-os-based-application-software-for-the-cdma-system">Linux OS Based Application Software for the CDMA System</a></p>
<ul>
<li><p><a class="reference external" href="#application-software-creation-steps">Application Software Creation Steps</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#running-linux-cdma-application-using-the-vitis-software-platform">Running Linux CDMA Application Using the Vitis Software Platform</a></p>
<ul>
<li><p><a class="reference external" href="#booting-linux-on-the-target-board">Booting Linux on the Target Board</a></p></li>
<li><p><a class="reference external" href="#linux-domain-creation-for-linux-applications">Linux Domain Creation for Linux Applications</a></p></li>
<li><p><a class="reference external" href="#building-an-application-and-running-it-on-the-target-board-using-the-vitis-software-platform">Building an Application and Running it on the Target Board Using the Vitis Software Platform</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="using-the-hp-slave-port-with-axi-cdma-ip">
<h1>Using the HP Slave Port with AXI CDMA IP<a class="headerlink" href="#using-the-hp-slave-port-with-axi-cdma-ip" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, you will instantiate AXI CDMA IP in fabric and
integrate it with the processing system high performance (HP) 64-bit
slave port. In this system, AXI CDMA acts as master device to copy an
array of the data from the source buffer location to the destination
buffer location in DDR system memory. The AXI CDMA uses the processing
system HP slave port to get read/ write access of DDR system memory.</p>
<p>You will write standalone application software and Linux OS based
application software using mmap() for the data transfer using AXI CDMA
block. You will also execute both standalone and Linux-based
application software separately on the ZC702 board.</p>
<div class="section" id="integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port">
<h2>Integrating AXI CDMA with the Zynq SoC PS HP Slave Port<a class="headerlink" href="#integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port" title="Permalink to this headline">¶</a></h2>
<p>Xilinx® Zynq®-7000 SoC devices internally provide four high
performance (HP) AXI slave interface ports that connect the
programmable logic (PL) to asynchronous FIFO interface (AFI) blocks in
the processing system (PS). The HP Ports enable a high throughput data
path between AXI masters in programmable logic and the processing
system’s memory system (DDR and on- chip memory). HP slave ports are
configurable to 64 bit or 32 bit interfaces.</p>
<p>In this section, you will create a design using AXI CDMA intellectual
property (IP) as master in fabric and integrate it with the PS HP 64
bit slave port. The block diagram for the system is as shown in the
following figure.</p>
<p><img alt="../../_images/image611.jpeg" src="../../_images/image611.jpeg" /></p>
<p>This system covers the following connections:</p>
<ul class="simple">
<li><p>AXI CDMA Slave Port is connected to the PS General Purpose master
port 1 (M_AXI_GP1). It is used by the PS CPU to configure the AXI
CDMA register set for the data transfer and also to check the
status.</p></li>
<li><p>AXI CDMA Master Port is connected to the PS High performance Slave
Port 0 (S_AXI_HP0). It is used by the AXI CDMA to read from the
DDR system memory. It acts as the source buffer location for the
CDMA during data transfer.</p></li>
<li><p>AXI CDMA Master Port is connected to the PS High performance Slave
Port 2 (S_AXI_HP2). It is used by the AXI CDMA to write the data
to the DDR system memory. It acts as a destination buffer location
for the CDMA during the Data transfer.</p></li>
<li><p>AXI CDMA interrupt is connected from fabric to the PS section
interrupt controller. After Data Transfer or Error during Data
transaction, the AXI CDMA interrupt is triggered.</p></li>
</ul>
<p>In this system, you will configure the HP slave port 0 to access a DDR
memory location range from 0x20000000 to 0x2fffffff. This DDR system
memory location acts as the source buffer location to CDMA for reading
the data.</p>
<p>You will also configure HP slave Port 2 to access a DDR memory
Location range from 0x30000000 to 0x3fffffff. This DDR system memory
location acts as a destination location to CDMA for writing the data.</p>
<p>You will also configure the AXI CDMA IP data width of the Data
Transfer channel to 1024 bits with Maximum Burst length set to 32.
With this setting, CDMA Maximum transfer size is set to 1024x32 bits
in one transaction.</p>
<p>You will write the application software code for the above system.
When you execute the code, it first initializes the source buffer
memory with the specified data pattern and also clears the destination
buffer memory by writing all zeroes to the memory location. Then, it
starts configuring the CDMA register for the DMA transfer. It writes
the source buffer location, destination buffer location, and number of
bytes to be transferred to the CDMA registers and waits for the CDMA
interrupt. When the interrupt occurs, it checks the status of the DMA
transfers.</p>
<p>If the data transfer status is successful, it compares the source
buffer data with the destination buffer data and displays the
comparison result on the serial terminal.</p>
<p>If the data transfer status is an error, it displays the error status
on the serial terminal and stops execution.</p>
</div>
<div class="section" id="example-project-integrating-axi-cdma-with-the-ps-hp-slave-port">
<h2>Example Project: Integrating AXI CDMA with the PS HP Slave Port<a class="headerlink" href="#example-project-integrating-axi-cdma-with-the-ps-hp-slave-port" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Start with one of the following:</p>
<ul class="simple">
<li><p>Use the system you created in <a class="reference external" href="3-using-gp-port-zynq.md#example-project-validate-instantiated-fabric-ip-functionality">Example Project: Validate Instantiated Fabric IP Functionality</a>.</p></li>
<li><p>Create a new project as described in <a class="reference external" href="2-using-zynq.md#creating-an-embedded-processor-project">Creating an Embedded Processor Project</a>.</p></li>
</ul>
</li>
<li><p>Open the Vivado® design from <a class="reference internal" href="3-using-gp-port-zynq.html"><span class="doc">Using the GP Port in Zynq Devices</span></a> called <strong>edt_tutorial</strong> and from the IP integrator click <strong>Open Block Design</strong>.</p></li>
<li><p>In the Diagram window, right-click in the blank space and select
<strong>Add IP</strong>.</p></li>
<li><p>In the search box, type CDMA and double-click the <strong>AXI Central
Direct Memory Access</strong> IP to add it to the Block Design. The AXI
Central Direct Memory Access IP block appears in the Diagram view.</p></li>
<li><p>In the Diagram window, right-click in the blank space and select
<strong>Add IP</strong>.</p></li>
<li><p>In the search box type concat and double-click the <strong>Concat</strong> IP to
add it to the Block Design. The Concat IP block appears in the
Diagram window. This block is used to concatenate the two
interrupt signals if you are using the prior design with the AXI
Timer.</p></li>
<li><p>Right-click the net from the interrupt port to the IRQ_F2P[0:0]
port and select <strong>Delete</strong>.</p></li>
<li><p>Click the IRQ_F2P[0:0] port and drag to the dout[1:0] output
port on the Concat IP core to make a connection between the two
ports.</p></li>
<li><p>Click the interrupt port on the AXI Timer IP core and drag to the
In0[0:0] input port on the Concat IP core to make a connection
between the two ports.</p></li>
<li><p>Click the cdma_introut port on the AXI CDMA IP core and drag to the
In1[0:0] input port on the Concat IP core to make a connection
between the two ports.</p></li>
<li><p>Right-click the <strong>ZYNQ7 Processing System</strong> core and select
<strong>Customize Block</strong>.</p></li>
<li><p>Select <strong>PS-PL Configuration</strong> and expand the <strong>HP Slave AXI
Interface</strong>.</p></li>
<li><p>Select the check box for <strong>S AXI HP0 interface</strong> and for <strong>S AXI HP2
interface</strong>.</p></li>
<li><p>Click <strong>OK</strong> to accept the changes.</p></li>
<li><p>Right-click the <strong>AXI CDMA IP</strong> core and select <strong>Customize Block</strong>.</p></li>
<li><p>Set the block settings in the Re-customize IP wizard page as
follows:</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>Enable Scatter Gather</p>
</blockquote></td>
<td><blockquote>
<p>Unchecked</p>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<p>Disable 4K Boundary Checks</p>
</blockquote></td>
<td><blockquote>
<p>Unchecked</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><blockquote>
<p>Allow Unaligned Transfers</p>
</blockquote></td>
<td><blockquote>
<p>Unchecked</p>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<p>Write/Read Data Width</p>
</blockquote></td>
<td><blockquote>
<p>1024</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><blockquote>
<p>Write/Read Burst Size</p>
</blockquote></td>
<td><blockquote>
<p>32</p>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<p>Enable Asynchronous Mode (Auto)</p>
</blockquote></td>
<td><blockquote>
<p>Unchecked</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><blockquote>
<p>Enable CDMA Store and Forward</p>
</blockquote></td>
<td><blockquote>
<p>Unchecked</p>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<p>Address Width</p>
</blockquote></td>
<td><blockquote>
<p>32</p>
</blockquote></td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>OK</strong> to accept the changes.</p></li>
<li><p>Click the <strong>Run Connection Automation</strong> link in the Diagram window
to automate the remaining connections.</p></li>
<li><p>In the Run Connection Automation dialog box make sure the <strong>All
Automation</strong> box is checked, then click <strong>OK</strong> to accept the
default connections. The finished diagram should look like the
following figure.</p>
<p><strong><em>Note</em>:</strong> You might receive a critical warning message regarding
forcibly mapping a net into a conflicting address. Address the error
by manually updating the memory mapped address in the next steps.
Click <strong>OK</strong> if you see the error message.</p>
<p><img alt="../../_images/image621.png" src="../../_images/image621.png" /></p>
</li>
<li><p>Select the <strong>Address Editor</strong> window.</p>
<p><img alt="../../_images/image631.png" src="../../_images/image631.png" /></p>
</li>
<li><p>In the Address Editor window, expand <strong>axi_cdma_0 →
axi_cdma_0/Data</strong>. Right-click <strong>HP2_DDR_LOWOCM</strong> and select <strong>Unassign</strong>.</p></li>
<li><p>In the Range column for <strong>S_AXI_HP0</strong>, select <strong>256M</strong>.</p></li>
<li><p>Under Offset Address for <strong>S_AXI_HP0</strong>, set a value of
<strong>0x2000_0000</strong>.</p></li>
<li><p>In the Address Editor window, expand <strong>axi_cdma_0 → axi_cdma_0/Data→
Unassigned</strong>. Right- click on <strong>HP2_DDR_LOWOCM</strong> and select
<strong>Assign</strong>.</p></li>
<li><p>In the Range column for <strong>S_AXI_HP2</strong>, select <strong>256M</strong>.</p></li>
<li><p>Under Offset Address for <strong>S_AXI_HP2</strong>, set a value of
<strong>0x3000_0000</strong>.</p>
<p><img alt="../../_images/image64.jpeg" src="../../_images/image64.jpeg" /></p>
</li>
<li><p>In the Flow Navigator, select <strong>Generate Bitstream</strong> under PROGRAM
AND DEBUG. The Save Project dialog box opens.</p></li>
<li><p>Ensure that the <strong>Block Design - tutorial_bd</strong> check box is
selected, then click <strong>Save</strong>.</p></li>
<li><p>A message might appear that states synthesis is out of date. If it
does, click <strong>Yes</strong>.</p></li>
<li><p>After the bitstream generation completes, export the hardware and
launch the Vitis unified software platform as described in
<a class="reference external" href="2-using-zynq.md#exporting-a-hardware-platform">Exporting a Hardware Platform</a>.</p>
<p><strong><em>Note</em>:</strong> Make sure to select <strong>Include bitstream</strong> instead of the
<strong>Pre-synthesis</strong> on the Output page of the for Export Hardware
Platform wizard.</p>
</li>
</ol>
<div class="section" id="standalone-application-software-for-the-design">
<h3>Standalone Application Software for the Design<a class="headerlink" href="#standalone-application-software-for-the-design" title="Permalink to this headline">¶</a></h3>
<p>The CDMA-based system that you designed in this chapter requires
application software to execute on the board. This section describes
the details about the CDMA-based Standalone application software.</p>
<p>The main() function in the application software is the entry point for
the execution. It initializes the source memory buffer with the
specified test pattern and clears the destination memory buffer by
writing all zeroes.</p>
<p>The application software then configures the CDMA registers sets by
providing information such as source buffer and destination buffer
starting locations. To initiate DMA transfer, it writes the number of
bytes to be transferred in the CDMA register and waits for the CDMA
interrupt to happen. After the interrupt, it checks the status of the
DMA transfer and compares the source buffer with the destination
buffer. Finally, it prints the comparison result in the serial
terminal and stops running.</p>
<div class="section" id="application-software-flow">
<h4>Application Software Flow<a class="headerlink" href="#application-software-flow" title="Permalink to this headline">¶</a></h4>
<p>The application software does the following:</p>
<ol>
<li><p>Initializes the source buffer with the specified test pattern. The
source buffer location ranges from 0x20000000 to 0x2fffffff.</p>
<p>Clears the destination buffer by writing all zeroes into the
destination address range. The destination buffer location ranges from
0x30000000 to 0x3fffffff.</p>
</li>
<li><p>Initializes AXI CDMA IP and does the following:</p>
<p>a.  Associates a CDMA callback function with AXI CDMA ISR and Enable
the Interrupt.</p>
<p>This Callback function executes during the CDMA interrupt. It sets the
interrupt Done and/or Error flags depending on the DMA transfer
status.</p>
<p>Application software waits for the Callback function to populate these
flags and executes the software according to the status flag.</p>
<p>b.  Configures the CDMA in Simple mode.</p>
<p>c.  Checks the Status register of the CDMA IP to verify the CDMA idle
status.</p>
<p>d.  Sets the source buffer starting location, 0x20000000, to the CDMA
register.</p>
<p>e.  Sets the destination buffer starting location, 0x30000000, to the
CDMA register.</p>
<p>f.  Sets the number of bytes to transfer to the CDMA register. The
application software starts the DMA transfer.</p>
</li>
<li><p>After the CDMA interrupt is triggered, checks the DMA transfer
status.</p>
<p>If the transfer status is successful, the application software
compares the source buffer location with the destination buffer
location and displays the comparison result on the serial terminal,
and then exits from the execution.</p>
<p>If the transfer status displays an error, the software prints the
error status in the serial terminal and stops running.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="running-the-standalone-cdma-application-using-the-vitis-software-platform">
<h3>Running the Standalone CDMA Application Using the Vitis Software Platform<a class="headerlink" href="#running-the-standalone-cdma-application-using-the-vitis-software-platform" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Open the Vitis software platform.</p></li>
<li><p>Check that the Target Communication Frame (TCF) (hw_server.exe)
agent is running on your Windows machine. If it is not running in
theVitis software platform, select <strong>Xilinx → XSCT Console</strong>.</p></li>
<li><p>In the XSCT Console view, type Connect. A message appears, stating
that the hw_server application started, or if it has started and
is running, you see tcfchan#, as shown in the following figure.</p>
<p><img alt="../../_images/image651.jpeg" src="../../_images/image651.jpeg" /></p>
</li>
<li><p>In the Vitis software platform, select <strong>File → New → Application
Project</strong>. The New Application Project wizard opens.</p></li>
<li><p>Use the information in the table below to make your selections in
the wizard screens.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Platform</td>
<td>Select a platform from repository</td>
<td><p>Click <strong>hw_platform [custom]</strong> with the path as</p>
<p>C:\designs\workspace\hw_platform\export</p>
<p>\hw_platform\hw_platform.xpfm</p></td>
</tr>
<tr class="even">
<td>Application Project Details</td>
<td>Application project name</td>
<td>Enter cdma_app</td>
</tr>
<tr class="odd">
<td>Domain</td>
<td>Select a domain</td>
<td>Click <strong>standalone on ps7_cortex9_0</strong>.</td>
</tr>
<tr class="even">
<td>Templates</td>
<td>Available Templates</td>
<td>Empty Application</td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>Finish</strong>.</p>
<p>The New Application Project wizard closes and the Vitis software
platform creates the cdma_app application project under the Explorer view.</p>
</li>
<li><p>In the Explorer view, expand the <strong>cdma_app</strong> project, right-click
the <strong>src</strong> directory, and select <strong>Import Sources</strong> to open the Import Sources dialog box.</p></li>
<li><p>In the <strong>Import Sources</strong> dialog box, click the <strong>Browse</strong> button
next to the <strong>From directory</strong> field and specify the design files
folder you saved earlier (see <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This
Tutorial</a>).</p></li>
<li><p>Select the cdma_app.c file and click <strong>Finish</strong>.</p></li>
<li><p>Build the cdma application project either by clicking the hammer
button or by right-clicking on the <strong>cdma_app</strong> project and
selecting <strong>Build Project</strong>.</p></li>
<li><p>Open the serial communication utility with baud rate set to
<strong>115200</strong>.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Make sure that the hardware board is set up and turned on.</p>
<p><strong><em>Note</em>:</strong> Refer to <a class="reference external" href="2-using-zynq.md#creating-a-platform-project-in-the-vitis-software-platform-with-an-xsa-from-vivado">Creating a Platform Project in the Vitis Software Platform with an XSA from Vivado</a>
for information about setting up the board.</p>
</li>
<li><p>Select <strong>Xilinx → Program FPGA</strong> to open the Program FPGA dialog
box. The dialog box shows the bitstream path.</p></li>
<li><p>Click <strong>Program</strong> to download the bitstream and program the PL
fabric.</p></li>
<li><p>Run the project similar to the steps in <a class="reference external" href="#creating-a-platform-project-in-the-vitis-software-platform-with-an-xsa-from-vivado">Creating a Platform Project
in the Vitis Software Platform with an XSA from
Vivado</a>.</p></li>
<li><p>Check the status of the CDMA transfer in the serial terminal. If the
transfer is successful, the message “DMA Transfer is Successful”
displays. Otherwise, the serial terminal displays an error
message.</p></li>
</ol>
</div>
</div>
<div class="section" id="linux-os-based-application-software-for-the-cdma-system">
<h2>Linux OS Based Application Software for the CDMA System<a class="headerlink" href="#linux-os-based-application-software-for-the-cdma-system" title="Permalink to this headline">¶</a></h2>
<p>In this section, you will create a Linux-based application software
for CDMA using the mmap() system call provided by Linux and run it on
the hardware to check the functionality of the CDMA IP.</p>
<p>The mmap() system call is used to map specified kernel memory area to
the User layer, so that you can read or write on it depending on the
attribute provided during the memory mapping.</p>
<p><img alt="../../_images/image66.png" src="../../_images/image66.png" /></p>
<p><strong><em>Note</em>:</strong> Details about the mmap() system call is beyond the scope of this guide.</p>
<p><strong>CAUTION!</strong> <em>Use of the mmap() call might crash the kernel if it
accesses, by mistake, some restricted area or shared resources of the
kernel.</em></p>
<p>The main() function in the application software is the entry point for
the execution. It initializes the source array with the specified test
pattern and clears the destination array. Then it copies the source
array contents to the DDR memory starting at location 0x20000000 and
makes the DMA register setting to initiate DMA transfer to the
destination. After the DMA transfer, the application reads the status
of the transfer and displays the result on the serial terminal.</p>
<div class="section" id="application-software-creation-steps">
<h3>Application Software Creation Steps<a class="headerlink" href="#application-software-creation-steps" title="Permalink to this headline">¶</a></h3>
<p>Application software creation is composed of the following steps:</p>
<ol>
<li><p>Initialize the whole source array, which is in the User layer with
value 0xa5a5a5a5.</p></li>
<li><p>Clear the whole destination buffer, which is in the User layer, by
writing all zeroes.</p></li>
<li><p>Map the kernel memory location starting from 0x20000000 to the User
layer with writing permission using mmap() system calls.By doing so, you can write to the specified kernel memory.</p></li>
<li><p>Copy the source array contents to the mapped kernel memory.</p></li>
<li><p>Un-map the kernel memory from the User layer.</p></li>
<li><p>Map the AXI CDMA register memory location to the User layer with
reading and writing permission using the mmap() system call. Make
the following CDMA register settings from the User layer:</p>
<p>a.  Reset DMA to stop any previous communication.</p>
<p>b.  Enable interrupt to get the status of the DMA transfer.</p>
<p>c.  Set the CDMA in simple mode.</p>
<p>d.  Verify that the CDMA is idle.</p>
<p>e.  Set the source buffer starting location, 0x20000000, to the CDMA
register.</p>
<p>f.  Set the destination buffer starting location, 0x30000000, to the
CDMA register.</p>
<p>g.  Set the number of bytes to be transferred in the CDMA register.
Writing to this register starts the DMA transfer.</p>
</li>
<li><p>Continuously read the DMA transfer status until the transfer
finishes.</p></li>
<li><p>After CDMA transfer finishes, un-map the CDMA register memory for
editing from the User layer using the mmap() system call.</p></li>
<li><p>Map the kernel memory location starting from 0x30000000 to the User
layer with reading and writing permissions.</p></li>
<li><p>Copy the kernel memory contents starting from 0x30000000 to the User
layer destination array.</p></li>
<li><p>Un-map the kernel memory from the User layer.</p></li>
<li><p>Compare the source array with the destination array.</p></li>
<li><p>Display the comparison result in the serial terminal. If the
comparison is successful, the message “DATA Transfer is
Successful” displays. Otherwise, the serial terminal displays an
error message.</p></li>
</ol>
</div>
</div>
<div class="section" id="running-linux-cdma-application-using-the-vitis-software-platform">
<h2>Running Linux CDMA Application Using the Vitis Software Platform<a class="headerlink" href="#running-linux-cdma-application-using-the-vitis-software-platform" title="Permalink to this headline">¶</a></h2>
<p>Detailed steps on running Linux on the target board are outlined in
<a class="reference internal" href="6-linux-booting-debug.html"><span class="doc">Linux Booting and Debug in the Vitis
Software Platform</span></a>. If you are not comfortable running
Linux, run through the <a class="reference internal" href="6-linux-booting-debug.html"><span class="doc">Linux Booting and Debug in the
Vitis Software Platform</span></a> examples prior to running this
example. Running a Linux OS based application is composed of the
following steps:</p>
<ol class="simple">
<li><p><a class="reference external" href="#booting-linux-on-the-target-board">Booting Linux on the Target Board</a></p></li>
<li><p><a class="reference external" href="#linux-domain-creation-for-linux-applications">Linux Domain Creation for Linux
Applications</a></p></li>
<li><p><a class="reference external" href="#building-an-application-and-running-it-on-the-target-board-using-the-vitis-software-platform">Building an Application and Running it on the Target Board Using
the Vitis Software
Platform</a></p></li>
</ol>
<div class="section" id="booting-linux-on-the-target-board">
<h3>Booting Linux on the Target Board<a class="headerlink" href="#booting-linux-on-the-target-board" title="Permalink to this headline">¶</a></h3>
<p>You will now boot Linux on the Zynq-7000 SoC ZC702 target board using
JTAG mode.</p>
<p><strong><em>Note</em>:</strong> Additional boot options will be explained in <a class="reference internal" href="6-linux-booting-debug.html"><span class="doc">Linux Booting and Debug in the Software
Platform</span></a>.</p>
<ol>
<li><p>Check the following Board Connection and Setting for Linux booting
using JTAG mode:</p>
<p>a.  Ensure that the settings of Jumpers J27 and J28 are set as
described in <a class="reference external" href="2-using-zynq.md#creating-a-platform-project-in-the-vitis-software-platform-with-an-xsa-from-vivado">Creating a Platform Project in the Vitis Software Platform with an XSA from Vivado</a>.</p>
<p>b.  Ensure that the SW16 switch is set as shown in the following
figure.</p>
<p>c.  Connect an Ethernet cable from the Zynq SoC board to your
network.</p>
<p>d.  Connect the Windows Host machine to your network.</p>
<p>e.  Connect the power cable to the board.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image67.jpeg)
</pre></div>
</div>
</li>
<li><p>Connect a micro USB cable between the Windows host machine and the
target board with the following SW10 switch settings, as shown in
<a class="reference external" href="6-linux-booting-debug.md#booting-linux-on-the-target-board">Booting Linux on the Target Board</a>.</p>
<ul class="simple">
<li><p>Bit-1 is 0</p></li>
<li><p>Bit-2 is 1</p></li>
</ul>
<p><strong><em>Note</em>:</strong> 0 = switch is open. 1 = switch is closed. The correct JTAG
mode has to be selected, according to the user interface. The JTAG
mode is controlled by switch SW10 on the ZC702 and SW4 on the ZC706.</p>
<p><img alt="../../_images/image68.jpeg" src="../../_images/image68.jpeg" /></p>
</li>
<li><p>Connect a USB cable to connector J17 on the target board with the
Windows Host machine. This is used for USB to serial transfer.</p></li>
<li><p>Change Ethernet Jumper J30 and J43 as shown in the following figure.</p>
<p><img alt="../../_images/image69.jpeg" src="../../_images/image69.jpeg" /></p>
</li>
<li><p>Power on the target board.</p></li>
<li><p>Launch the Vitis software platform and open the same workspace you
used in <a class="reference internal" href="2-using-zynq.html"><span class="doc">Using the Zynq SoC Processing System</span></a> and <a class="reference internal" href="3-using-gp-port-zynq.html"><span class="doc">Using the GP Port in Zynq Devices</span></a>.</p></li>
<li><p>If the serial terminal is not open, connect the serial communication
utility with the baud rate set to <strong>115200</strong>.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Select <strong>Xilinx → Program FPGA</strong>, then click <strong>Program</strong> to download
the bitstream.</p></li>
<li><p>Open the Xilinx System Debugger (XSCT) tool by selecting <strong>Xilinx →
XSCT Console</strong>.</p></li>
<li><p>At the XSCT prompt, do the following:</p>
<p>a.  Type connect to connect with the PS section.</p>
<p>b.  Type targets to get the list of target processors.</p>
<p>c.  Type targets 2 to select the processor CPU1.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
xsct% targets
1 APU
2 Arm Cortex-A9 MPCore #0 (Running)
3 Arm Cortex-A9 MPCore #1 (Running)
4 xc7z020
xsct% targets 2
xsct% targets
1 APU
2* Arm Cortex-A9 MPCore #0 (Running)
3 Arm Cortex-A9 MPCore #1 (Running)
4 xc7z020
```
</pre></div>
</div>
<p>d.  Type dow &lt;tutorial_download_path&gt;/zynq_fsbl.elf to download
PetaLinux FSBL.</p>
<p>e.  Type con to start execution of FSBL and then type stop to stop
it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image70.jpeg)
</pre></div>
</div>
<p>f.  Type dow &lt;tutorial_download_path&gt;/u-boot.elf to download PetaLinux
U- Boot.elf.</p>
<p>g.  Type con to start execution of U-Boot.  On the serial terminal, the autoboot countdown message appears:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``Hit any key to stop autoboot: 3``
</pre></div>
</div>
<p>h.  Press <strong>Enter</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Automatic booting from U-Boot stops and a command prompt appears on
the serial terminal.

![](./media/image71.jpeg)
</pre></div>
</div>
<p>i.  At the XSCT Prompt, type stop. The U-Boot execution stops.</p>
<p>j.  Type dow -data &lt;tutorial_download_path&gt;/image.ub 0x30000000 to
download the Linux Kernel image at location 0x3000000.</p>
<p>k.  Type con to start executing U-Boot.</p>
</li>
<li><p>At the command prompt of the serial terminal, type bootm 0x30000000.
The Linux OS boots.</p></li>
<li><p>If required, provide the Zynq login as <strong>root</strong> and the password as
<strong>root</strong> on the serial terminal to complete booting the processor.</p>
<p>After booting completes, # prompt appears on the serial terminal.</p>
</li>
<li><p>At the root&#64;Xilinx-ZC702-2020.1:~# prompt, make sure that the
board Ethernet connection is configured:</p>
<p>a.  Check the IP address of the board by typing the following
command at the Zynq prompt: <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">eth0</span></code>.</p>
<p>This command displays all the details of the currently active
interface. In the message that displays, the inet addr value denotes
the IP address that is assigned to the Zynq SoC board.</p>
<p>b.  If inet addr and netmask values do not exist, you can assign them
using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
root@Xilinx-ZC702-2020.1:~# ifconfig eth0 inet 192.168.1.10
root@Xilinx-ZC702-2020.1:~# ifconfig eth0 netmask 255.255.255.0
```
</pre></div>
</div>
</li>
<li><p>Confirm that the IP address settings on the Windows machine are set
up to match the board settings. Adjust the local area connection
properties by opening your network connections.</p>
<p>a.  Right-click the local area connection that is linked to the
XC702 board and select Properties.</p>
<p>b.  In the Local Area Connection Properties dialog box, select
<strong>Internet Protocol Version 4 (TCP/IPv4)</strong> from the item list and
select <strong>Properties</strong>.</p>
<p>c.  Select <strong>Use the following IP address</strong> and set the following
values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
IP address: 192.168.1.11
Subnet mask: 255.255.255.0
```
</pre></div>
</div>
<p>d.  Click <strong>OK</strong> to accept the values.</p>
</li>
<li><p>In the Windows machine command prompt, check the connection with the
board by typing ping followed by the board IP address. The ping response displays in a loop.</p>
<p>This response means that the connection between the Windows host
machine and the target board is established.</p>
</li>
<li><p>Press <strong>Ctrl+C</strong> to stop displaying the ping response on the Windows
host machine command prompt.</p>
<p><img alt="../../_images/image72.jpeg" src="../../_images/image72.jpeg" /></p>
<p>Linux booting completes on the target board and the connection between
the host machine and the target board is complete.</p>
</li>
</ol>
</div>
<div class="section" id="linux-domain-creation-for-linux-applications">
<h3>Linux Domain Creation for Linux Applications<a class="headerlink" href="#linux-domain-creation-for-linux-applications" title="Permalink to this headline">¶</a></h3>
<p>Now that Linux is running on the board, you can create a Linux domain
followed by a Linux application. The steps to create a Linux domain
are given below:</p>
<ol>
<li><p>Go to the Explorer view in the Vitis software platform and expand
the <strong>hw_platform</strong> platform project.</p></li>
<li><p>Open the hardware by double clicking <strong>platform.spr</strong>.</p></li>
<li><p>The platform view opens. Click the <strong>+</strong> button in the right corner
to add a domain, as shown in the following figure.</p>
<p><img alt="../../_images/image731.jpeg" src="../../_images/image731.jpeg" /></p>
</li>
<li><p>When the New Domain dialog box opens, enter the details as given
below:</p>
<ul class="simple">
<li><p><strong>Name:</strong> linux_domain</p></li>
<li><p><strong>Display Name:</strong> linux_application_domain</p></li>
<li><p><strong>OS:</strong> Linux</p></li>
<li><p><strong>Processor:</strong> ps7_cortexa9</p></li>
<li></li>
</ul>
</li>
</ol>
<div class="section" id="supported-runtimes-c-c">
<h4>Supported Runtimes: C/C++<a class="headerlink" href="#supported-runtimes-c-c" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="building-an-application-and-running-it-on-the-target-board-using-the-vitis-software-platform">
<h3>Building an Application and Running it on the Target Board Using the Vitis Software Platform<a class="headerlink" href="#building-an-application-and-running-it-on-the-target-board-using-the-vitis-software-platform" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Now that Linux is running on the board, create a Linux application
to use the CDMA. Select File → New → Application Project.</p></li>
<li><p>Use the information in the table below to make your selections in
the wizard screens.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Platform</td>
<td>Select a platform from repository</td>
<td>Click <strong>hw_platform [custom]</strong>.</td>
</tr>
<tr class="even">
<td>Application Project Details</td>
<td>Application project name</td>
<td>Enter linux_cdma_app</td>
</tr>
<tr class="odd">
<td></td>
<td>Select target processor for the Application project</td>
<td>Select <strong>ps7_cortexa9 SMP</strong>.</td>
</tr>
<tr class="even">
<td>DomainDomain</td>
<td>Select a domain</td>
<td>Click linux_application_domain</td>
</tr>
<tr class="odd">
<td></td>
<td>Application settings</td>
<td>If known, enter the sysroot, root FS, and kernal image paths. Otherwise, leave these options blank.</td>
</tr>
<tr class="even">
<td>Templates</td>
<td>Available Templates</td>
<td>Linux Empty Application</td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>Finish</strong>.</p>
<p>The New Application Project wizard closes and the Vitis software
platform creates the linux_cdma_app project under the Explorer view.</p>
</li>
<li><p>In the Explorer view, expand linux_cdma_app project, right-click the
<strong>src</strong> directory, and select <strong>Import Sources</strong> to open the
Import Sources dialog box.</p></li>
<li><p>In the <strong>Import Sources</strong> dialog box, click the <strong>Browse</strong> button
next to the <strong>File system</strong> field and specify the design files
directory already downloaded. Select the <strong>linux_cdma_app.c</strong>
example application file and click <strong>Finish</strong>.</p>
<p><strong><em>Note</em>:</strong> The example application software file is available in the
ZIP file that accompanies this guide. See <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This
Tutorial</a>.</p>
</li>
<li><p>Build the application project either by clicking the hammer button
or by right-clicking on the linux_cdma_app project and selecting
<strong>Build Project</strong>. The binary file linux_cdma_app.elf is
generated.</p></li>
<li><p>Right-click linux_cdma_app and select <strong>Run As → Run
Configurations</strong> to open the Run Configurations dialog box, shown
in the following figure.</p></li>
<li><p>Right-click <strong>Xilinx C/C++ application (Application Debugger)</strong> and select <strong>New</strong>.</p>
<p><img alt="../../_images/image76.jpeg" src="../../_images/image76.jpeg" /></p>
</li>
<li><p>Click <strong>New</strong> button next to the Connection to open the Target
Connection Details dialog box.</p></li>
<li><p>In the Target Connection Details dialog box, apply the settings
below:</p>
<p>a.  Specify a name in the <strong>Target Name</strong> field. For the purposes of
this exercise, use CDMALinux.</p>
<p>b.  In the <strong>Host</strong> field, enter the target board IP address.</p>
<p>To determine the target board IP address, type ifconfig eth0 at the
Zynq\prompt in the serial terminal. The terminal displays the target
IP address that is assigned to the board.</p>
<p>c.  In the <strong>Port</strong> field, type 1534.</p>
</li>
<li><p>Click <strong>OK</strong> to create the connection.</p></li>
<li><p>As shown in the following figure, on the <strong>Application</strong> tab, enter
application data settings for the following:</p>
<p>a.  Project Name: linux_cdma_app</p>
<p>b.  Local File Path: Debug/linux_cdma_app.elf</p>
<p>c.  Remote File Path: /tmp/cdma.elf</p>
<p><img alt="../../_images/image771.jpeg" src="../../_images/image771.jpeg" /></p>
</li>
<li><p>Click <strong>Run</strong>. The application executes, and the message DATA
Transfer is Successful appears in the console window, as shown in the following figure.</p>
<p><img alt="../../_images/image78.jpeg" src="../../_images/image78.jpeg" /></p>
<p>© Copyright 2015–2020 Xilinx, Inc.</p>
</li>
</ol>
</div>
</div>
</div>
<p>Select <strong>Use pre-built software components</strong>, then under this:</p>
<p>a.  Create one boot directory in the C:\designs folder, then copy the
boot components into it (FSBL, PMUFW from the Vitis software
platform, ATF, u-boot.elf and image.ub from PetaLinux).</p>
<p>b.  Create one BIF file as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image74.png)   
</pre></div>
</div>
<ol>
<li><p>Click <strong>OK</strong> to finish and observe
that the Linux domain has been added to the hw_platform as shown
below.</p>
<p><img alt="../../_images/image751.jpeg" src="../../_images/image751.jpeg" /></p>
<p>Now you are ready with Linux domain to create Linux applications.</p>
</li>
</ol>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 19, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>