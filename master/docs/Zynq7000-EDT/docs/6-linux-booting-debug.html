


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/Zynq7000-EDT/docs/6-linux-booting-debug.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Linux Booting and Debug in the Vitis Software Platform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Zynq7000-EDT/docs/6-linux-booting-debug.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="right">
            Read this page in other languages:<a href="../docs-jp/6-linux-booting-debug.md">日本語</a>    <table style="width:100%"><table style="width:100%">
  <tr><th width="100%" colspan="6"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Zynq-7000 SoC Embedded Design Tutorial 2020.2 (UG1165)</h1>
</th>  </tr>
  <tr>
    <td width="33%" align="center"><a href="../README.md">1. Introduction</a></td>
    <td width="33%" align="center"><a href="2-using-zynq.md">2. Using the Zynq SoC Processing System</a></td>
    <td width="33%" align="center"><a href="3-using-gp-port-zynq.md">3. Using the GP Port in Zynq Devices</a></td>
</tr>
<tr><td width="33%" align="center"><a href="4-debugging-vitis.md">4. Debugging with the Vitis Software Platform</a></td>
    <td width="33%" align="center"><a href="5-using-hp-port.md">5. Using the HP Slave Port with AXI CDMA IP</a></td>
    <td width="33%" align="center">6. Linux Booting and Debug in the Vitis Software Platform</td>
  </tr>
  <tr>
      <td width="33%" align="center"><a href="7-custom-ip-driver-linux.md">7. Creating Custom IP and Device Driver for Linux
  </a></td>
      <td width="33%" align="center"><a href="8-sw-profiling.md">8. Software Profiling Using the Vitis Software Platform</a></td>    
      <td width="33%" align="center"><a href="9-linux-aware-debugging.md">9. Linux Aware Debugging</a></td>    
    </tr>
</table><ul class="simple">
<li><p><a class="reference external" href="#linux-booting-and-debug-in-the-vitis-software-platform">Linux Booting and Debug in the Vitis Software Platform</a></p>
<ul>
<li><p><a class="reference external" href="#requirements">Requirements</a></p></li>
<li><p><a class="reference external" href="#booting-linux-on-a-zynq-soc-board">Booting Linux on a Zynq SoC Board</a></p>
<ul>
<li><p><a class="reference external" href="#boot-methods">Boot Methods</a></p>
<ul>
<li><p><a class="reference external" href="#master-boot-method"><em>Master Boot Method</em></a></p></li>
<li><p><a class="reference external" href="#slave-boot-method"><em>Slave Boot Method</em></a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#booting-linux-from-jtag">Booting Linux from JTAG</a></p></li>
<li><p><a class="reference external" href="#preparing-the-petalinux-build-for-debugging">Preparing the PetaLinux Build for Debugging</a></p></li>
<li><p><a class="reference external" href="#booting-linux-using-jtag-mode">Booting Linux Using JTAG Mode</a></p></li>
<li><p><a class="reference external" href="#example-design-debugging-the-linux-application-using-the-vitis-software-platform">Example Design: Debugging the Linux Application Using the Vitis Software Platform</a></p></li>
<li><p><a class="reference external" href="#example-project-booting-linux-from-qspi-flash">Example Project: Booting Linux from QSPI Flash</a></p>
<ul>
<li><p><a class="reference external" href="#create-the-first-stage-boot-loader-executable-file">Create the First Stage Boot Loader Executable File</a></p></li>
<li><p><a class="reference external" href="#make-a-linux-bootable-image-for-qspi-flash"><em>Make a Linux Bootable Image for QSPI Flash</em></a></p></li>
<li><p><a class="reference external" href="#program-qspi-flash-with-the-boot-image-using-jtag"><em>Program QSPI Flash with the Boot Image Using JTAG</em></a></p></li>
<li><p><a class="reference external" href="#program-qspi-flash-with-the-flash-programming-tool">Program QSPI Flash with the Flash Programming Tool</a></p></li>
<li><p><a class="reference external" href="#booting-linux-from-qspi-flash"><em>Booting Linux from QSPI Flash</em></a></p></li>
<li><p><a class="reference external" href="#booting-linux-from-the-sd-card">Booting Linux from the SD Card</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="linux-booting-and-debug-in-the-vitis-software-platform">
<h1>Linux Booting and Debug in the Vitis Software Platform<a class="headerlink" href="#linux-booting-and-debug-in-the-vitis-software-platform" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes the steps to configure and build the Linux OS
for a Zynq®-7000 SoC board with PetaLinux Tools. It also provides
information about downloading images precompiled by Linux on the
target memory using a JTAG interface.</p>
<p>The later part of this chapter covers programming the following
non-volatile memory with the precompiled images, which are used for
automatic Linux booting after switching on the board:</p>
<ul class="simple">
<li><p>On-board QSPI Flash</p></li>
<li><p>SD card</p></li>
</ul>
<p>This chapter also describes using the remote debugging feature in the
Xilinx® Vitis unified software platform to debug Linux applications
running on the target board. The Vitis software platform runs on the
Windows host machine. For application debugging, the platform
establishes an Ethernet connection to the target board that is already
running the Linux OS.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>In this chapter, the target platform refers to a Zynq SoC board. The
host platform refers to a Windows machine that is running the Vivado®
tools and PetaLinux installed on a Linux machine (either physical or
virtual).</p>
<p><strong><em>Note</em>:</strong> The Das U-Boot universal bootloader is required for the
tutorials in this chapter. It is included in the precompiled images
that you will download next.</p>
<p>From the Xilinx documentation website, download the ZIP file that
accompanies this guide. See <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This Tutorial</a>. It includes the following files:</p>
<ul class="simple">
<li><p><strong>BOOT.bin:</strong> Binary image containing the FSBL and U-Boot images
produced by bootgen.</p></li>
<li><p><strong>cdma_app.c:</strong> Standalone Application software for the system you
will create in this chapter.</p></li>
<li><p><strong>helloworld.c:</strong> Standalone Application software for the system you
created in <a class="reference internal" href="3-using-gp-port-zynq.html"><span class="doc">Using the GP Port in Zynq
Devices</span></a>.</p></li>
<li><p><strong>linux_cdma_app:</strong> Linux OS based Application software for the
system you will create in this chapter.</p></li>
<li><p><strong>README.txt:</strong> Copyright and release information pertaining to the
ZIP file.</p></li>
<li><p><strong>u-boot.elf:</strong> U-Boot file used to create the BOOT.BIN image.</p></li>
<li><p><strong>Image.ub:</strong> PetaLinux build image (with kernel image,
ramdisk, and dtb)</p></li>
<li><p><strong>fsbl.elf:</strong> FSBL image used to create BOOT.BIN image.</p></li>
</ul>
</div>
<div class="section" id="booting-linux-on-a-zynq-soc-board">
<h2>Booting Linux on a Zynq SoC Board<a class="headerlink" href="#booting-linux-on-a-zynq-soc-board" title="Permalink to this headline">¶</a></h2>
<p>This section covers the flow for booting Linux on the target board
using the precompiled images that you downloaded in
<a class="reference external" href="#requirements">Requirements</a>.</p>
<p><strong><em>Note</em>:</strong> The compilations of the different images like Kernel
image, U-Boot, Device tree, and root file system is beyond the scope
of this guide.</p>
<div class="section" id="boot-methods">
<h3>Boot Methods<a class="headerlink" href="#boot-methods" title="Permalink to this headline">¶</a></h3>
<p>The following boot methods are available:</p>
<ul class="simple">
<li><p>Master Boot Method</p></li>
<li><p>Slave Boot Method</p></li>
</ul>
<div class="section" id="master-boot-method">
<h4><em>Master Boot Method</em><a class="headerlink" href="#master-boot-method" title="Permalink to this headline">¶</a></h4>
<p>In the master boot method, different kinds of non-volatile memories
such as QSPI, NAND, NOR flash, and SD cards are used to store boot
images. In this method, the CPU loads and executes the external boot
images from non-volatile memory into the Processor System (PS). The
master boot method is further divided into Secure and Non Secure
modes. Refer to the <em>Zynq-7000 SoC Technical Reference Manual</em>
(<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/ndoc?t=user_guides%3Bd%3Dug585-Zynq-7000-TRM.pdf">UG585</a>) for more detail.</p>
<p>The boot process is initiated by one of the Arm® Cortex™-A9 CPUs in
the processing system (PS) and it executes on-chip ROM code. The
on-chip ROM code is responsible for loading the first stage boot
loader (FSBL). The FSBL does the following:</p>
<ul class="simple">
<li><p>Configures the FPGA with the hardware bitstream (if it exists)</p></li>
<li><p>Configures the MIO interface</p></li>
<li><p>Initializes the DDR controller</p></li>
<li><p>Initializes the clock PLL</p></li>
<li><p>Loads and executes the Linux U-Boot image from non-volatile memory
to DDR</p></li>
</ul>
<p>The U-Boot loads and starts the execution of the kernel image, the
root file system, and the device tree from non-volatile RAM to DDR. It
finishes booting Linux on the target platform.</p>
</div>
<div class="section" id="slave-boot-method">
<h4><em>Slave Boot Method</em><a class="headerlink" href="#slave-boot-method" title="Permalink to this headline">¶</a></h4>
<p>JTAG can only be used in slave boot mode. An external host computer
acts as the master to load the boot image into the OCM using a JTAG
connection.</p>
<p><strong><em>Note</em>:</strong> The PS CPU remains in idle mode while the boot image
loads. The slave boot method is always a non-secure mode of booting.</p>
<p>In JTAG boot mode, the CPU enters halt mode immediately after it
disables access to all security related items and enables the JTAG
port. You must download the boot images into the DDR memory before
restarting the CPU for execution.</p>
</div>
</div>
<div class="section" id="booting-linux-from-jtag">
<h3>Booting Linux from JTAG<a class="headerlink" href="#booting-linux-from-jtag" title="Permalink to this headline">¶</a></h3>
<p>The flow chart in the following figure describes the process used to
boot Linux on the target platform.</p>
<p><img alt="../../_images/X24074-Page-1.png" src="../../_images/X24074-Page-1.png" /></p>
</div>
<div class="section" id="preparing-the-petalinux-build-for-debugging">
<h3>Preparing the PetaLinux Build for Debugging<a class="headerlink" href="#preparing-the-petalinux-build-for-debugging" title="Permalink to this headline">¶</a></h3>
<p>To debug Linux applications (using tcf-agent), you must manually
enable tcf-agent in PetaLinux RootFS.</p>
<p>Ensure that dropbear-openssh-sftp server is disabled in PetaLinux
RootFS.</p>
<p><strong><em>Note</em>:</strong> The Vitis debugger supports Linux Application Debug using
tcf-agent (TCF - Target Communication Framework). TCF agent is
provided as a part of PetaLinux roofts packages, but needs to be
enabled when required.</p>
<p>Detailed information on enabling these components in the <em>PetaLinux
Tools Documentation: Reference Guide</em>
(<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bd%3Dug1144-petalinux-tools-reference-guide.pdf">UG1144</a>),
section “Debugging Applications with TCF Agent.”</p>
</div>
<div class="section" id="booting-linux-using-jtag-mode">
<h3>Booting Linux Using JTAG Mode<a class="headerlink" href="#booting-linux-using-jtag-mode" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Check the following board connections and settings for Linux booting
using JTAG mode:</p>
<p>a.  Ensure that the settings of Jumpers J27 and J28 are set as
described in <a class="reference external" href="2-using-zynq.md#creating-a-platform-project-in-the-vitis-software-platform-with-an-xsa-from-vivado">Creating a Platform Project in the Vitis
Software Platform with an XSA from
Vivado</a>.</p>
<p>b.  Ensure that the SW16 switch is set as shown in the following
figure.</p>
<p>c.  Connect an Ethernet cable from the Zynq-7000 SoC board to your
network or directly to your host machine.</p>
<p>d.  Connect the Windows Host machine to your network.</p>
<p>e.  Connect the power cable to the board.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image67.jpeg)        
</pre></div>
</div>
</li>
<li><p>Connect a USB Micro cable between the Windows host machine and the
target board with the following SW10 switch settings, as shown in
the following figure.</p>
<ul class="simple">
<li><p>Bit-1 is 0</p></li>
<li><p>Bit-2 is 1</p></li>
</ul>
<p><strong><em>Note</em>:</strong> 0 = switch is open. 1 = switch is closed. The correct JTAG
mode has to be selected, according to the user interface. The JTAG
mode is controlled by switch SW10 on the zc702 and SW4 on the zc706.</p>
<p><img alt="../../_images/image68.jpeg" src="../../_images/image68.jpeg" /></p>
</li>
<li><p>Connect a USB cable to connector J17 on the target board with the
Windows Host machine. This is used for USB to serial transfer.</p></li>
<li><p>Change Ethernet Jumper J30 and J43 as shown in the following figure.</p>
<p><img alt="../../_images/image69.jpeg" src="../../_images/image69.jpeg" /></p>
</li>
<li><p>Power on the target board.</p></li>
<li><p>Launch the Vitis software platform and open same workspace you used
in <a class="reference internal" href="2-using-zynq.html"><span class="doc">Using the Zynq SoC Processing System</span></a>
and <a class="reference internal" href="3-using-gp-port-zynq.html"><span class="doc">Using the GP Port in Zynq Devices</span></a>.</p></li>
<li><p>If the serial terminal is not open, connect the serial communication
utility with the baud rate set to <strong>115200</strong>.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Download the bitstream by selecting <strong>Xilinx → Program FPGA</strong>, then
clicking <strong>Program</strong>.</p></li>
<li><p>Open the Xilinx System Debugger (XSCT) tool by selecting <strong>Xilinx →
XSCT Console</strong>.</p></li>
<li><p>At the XSCT prompt, do the following:</p>
<p>a.  Type connect to connect with the PS section.</p>
<p>b.  Type targets to get the list of target processors.</p>
<p>c.  Type ta 2 to select the processor CPU1.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
xsct% targets
1 APU
2 Arm Cortex-A9 MPCore #0 (Running)
3 Arm Cortex-A9 MPCore #1 (Running)
4 xc7z020
xsct% ta 2
xsct% targets
1 APU
2* Arm Cortex-A9 MPCore #0 (Running)
3 Arm Cortex-A9 MPCore #1 (Running)
4 xc7z02022
```
</pre></div>
</div>
<p>d.  Type dow &lt;tutorial_download_path&gt;zynq_fsbl.elf to download
PetaLinux FSBL.</p>
<p>e.  Type con to start execution of FSBL and then type stop to stop
it.</p>
<p>f.  Type dow &lt;tutorial_download_path&gt;/u-boot.elf to download
PetaLinux U- Boot.elf.</p>
<p>g.  Type con to start execution of U-Boot. On the serial terminal, the autoboot countdown message appears: <code class="docutils literal notranslate"><span class="pre">Hit</span> <span class="pre">any</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">stop</span> <span class="pre">autoboot:</span> <span class="pre">3</span></code>.</p>
<p>h.  Press Enter.Automatic booting from U-Boot stops and a command prompt appears on the serial terminal.</p>
<p>i.  At the XSCT Prompt, type stop. The U-Boot execution stops.</p>
<p>j.  Type dow -data image.ub 0x30000000 to download the Linux Kernel
image at location &lt;tutorial_download_path&gt;/image.ub.</p>
<p>k.  Type con to start executing U-Boot.</p>
</li>
<li><p>At the command prompt of the serial terminal, type bootm 0x30000000.
The Linux OS boots.</p></li>
<li><p>If required, provide the Zynq login as root and the password as root
on the serial terminal to complete booting the processor.</p>
<p>After booting completes, # prompt appears on the serial terminal.</p>
</li>
<li><p>At the root&#64;xilinx-zc702-2020.1:~# prompt, make sure that the
board Ethernet connection is configured:</p>
<p>a.  Check the IP address of the board by typing the following
command at the Zynq prompt: <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">eth0</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">command</span> <span class="n">displays</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">details</span> <span class="n">of</span> <span class="n">the</span> <span class="n">currently</span> <span class="n">active</span>
<span class="n">interface</span><span class="o">.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">message</span> <span class="n">that</span> <span class="n">displays</span><span class="p">,</span> <span class="n">the</span> <span class="n">inet</span> <span class="n">addr</span> <span class="n">value</span> <span class="n">denotes</span>
<span class="n">the</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Zynq</span> <span class="n">SoC</span> <span class="n">board</span><span class="o">.</span>
</pre></div>
</div>
<p>b.  If inetaddr and netmask values do not exist, you can assign them using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
root@xilinx-zc702-2020.1:~# ifconfig eth0 inet 192.168.1.10
root@xilinx-zc702-2020.1:~# ifconfig eth0 netmask 255.255.255.0
```

**IMPORTANT!** *If the target and host are connected back-to-back, you
must set up the IP address. If the target and host are connected over
a LAN , DHCP will get the IP address for the target; use the ifconfig
eth0 to display the IP address.*

![](./media/image31.png)

Next, confirm that the IP address settings on the Windows machine match the board settings. Adjust the local area connection properties by opening your network connections.

  i.  Right-click the local area connection that is linked to the XC702
      board and select Properties.

  ii. With the Local Area Connection properties window open, select
      **Internet Protocol Version 4 (TCP/IPv4)** from the item list and
      select **Properties**.

  iii. Select **Use the following IP address** and set the values as
       follows (also shown in the following figure):

       -   IP address: 192.168.1.11 (target and host must be in the same
           subnet if connected back- to-back)

       -   Subnet mask: 255.255.255.0

      ![](./media/image79.png)
</pre></div>
</div>
<p>c.  Click <strong>OK</strong> to accept the values and close the window.</p>
</li>
<li><p>In the Windows machine command prompt, check the connection with the
board by typing ping followed by the board IP address. The ping response displays in a loop. This response means that the connection between the Windows host machine and the target board is established.</p></li>
<li><p>Press <strong>Ctrl+C</strong> to stop displaying the ping response on windows
host machine command prompt. Linux booting completes on the target board and the connection between the host machine and the target board is complete. The next example design describes using the Vitis software platform to debug the Linux application.</p></li>
</ol>
</div>
<div class="section" id="example-design-debugging-the-linux-application-using-the-vitis-software-platform">
<h3>Example Design: Debugging the Linux Application Using the Vitis Software Platform<a class="headerlink" href="#example-design-debugging-the-linux-application-using-the-vitis-software-platform" title="Permalink to this headline">¶</a></h3>
<p>In this section, you will create a default Linux Hello World
application and practice the steps for debugging the Linux application
from the Windows host machine.</p>
<ol>
<li><p>Open the Vitis software platform.</p></li>
<li><p>Select <strong>File → New → Application Project</strong>. The New Application
Project wizard opens.</p></li>
<li><p>Use the information in the following table to make your selections
in the wizard screens.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Platform</td>
<td>Select a platform from repository</td>
<td>Click <strong>hw_platform [custom]</strong>.</td>
</tr>
<tr class="even">
<td>Application Project Details</td>
<td>Application project name</td>
<td>Enter HelloLinux</td>
</tr>
<tr class="odd">
<td></td>
<td>Select target processor for the Application project</td>
<td>Select <strong>ps7_cort exa9 SMP</strong>.</td>
</tr>
<tr class="even">
<td>Domain</td>
<td>Select a domain</td>
<td>Click <strong>linux_application_domain</strong>.</td>
</tr>
<tr class="odd">
<td></td>
<td>Application settings</td>
<td>If known, enter the sysroot, root FS, and kernel image paths. Otherwise, leave these options blank.</td>
</tr>
<tr class="even">
<td>Templates</td>
<td>Available Templates</td>
<td>Linux Hello World</td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>Finish</strong>.</p>
<p>The New Application Project wizard closes and the Vitis software
platform creates the HelloLinux project under the Explorer view. Build
the application project either by clicking the hammer button or by
right-clicking on the linux_cdma_app project and selecting <strong>Build
Project</strong>. Binary file linux_cdma_app.elf gets generated.</p>
</li>
<li><p>Right-click <strong>HelloLinux</strong> and select <strong>Debug as→ Debug
Configurations</strong> to open the Debug Configurations dialog box.</p></li>
<li><p>Select <strong>Linux Application Debug</strong> as the <strong>Debug Type</strong>, as shown in the following figure.</p>
<p><img alt="../../_images/image801.jpeg" src="../../_images/image801.jpeg" /></p>
</li>
<li><p>In the Main tab, Connection field, click <strong>New</strong>.</p></li>
<li><p>In the Target Connection Details dialog box (shown in the following
figure):</p>
<p>a.  Specify the <strong>Target Name</strong> of your choice.</p>
<p>b.  In the <strong>Host</strong> field, use the target IP address.</p>
<p>c.  In the <strong>Port</strong> field, specify 1534.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image81.png)
</pre></div>
</div>
</li>
<li><p>Set the application configuration details, as described below (and
shown in the following figure).</p>
<p>a.  Select the <strong>Application</strong> tab.</p>
<p>b.  Set the <strong>Remote File Path</strong>, for example /tmp/hellolinux.elf, and click <strong>Apply</strong>.</p>
<p><img alt="../../_images/image82.jpeg" src="../../_images/image82.jpeg" /></p>
</li>
<li><p>Click <strong>Debug</strong>. The Debug perspective opens.</p>
<p>From this you can:</p>
<ul>
<li><p>Observe that execution stopped at the main() function.</p></li>
<li><p>See disassembly points to the address.</p></li>
<li><p>Setup break points by right clicking the function on the left side
of the editor pane (showing the helloworld.c).</p></li>
<li><p>Once a breakpoint is set, it appears in the break point list. You
can observe and modify register contents. Notice that the PC
register address in the <strong>Breakpoint</strong> view and the address shown
in the <strong>Disassembly</strong> view are the same (see the following
figure).</p></li>
<li><p>Use <strong>step-into</strong> (F5), <strong>step-return</strong> (F7), <strong>step-over</strong> (F6),
<strong>Resume</strong> (F8) and <strong>continue debugging</strong> outlined in green in the following figure.</p>
<p><img alt="../../_images/image84.png" src="../../_images/image84.png" /></p>
<p><strong>TIP:</strong> <em>The Linux application output
displays in the Vitis software platform console, not the Terminal
window used for running Linux.</em></p>
</li>
</ul>
</li>
<li><p>After you finish debugging the Linux application, close the Vitis
IDE.</p></li>
</ol>
</div>
<div class="section" id="example-project-booting-linux-from-qspi-flash">
<h3>Example Project: Booting Linux from QSPI Flash<a class="headerlink" href="#example-project-booting-linux-from-qspi-flash" title="Permalink to this headline">¶</a></h3>
<p>This example project covers the following steps:</p>
<ol>
<li><p>Create the First Stage Boot Loader Executable File.</p></li>
<li><p>Make a Linux-bootable image for QSPI flash.</p>
<p><img alt="../../_images/image85.png" src="../../_images/image85.png" /></p>
<p>PetaLinux must be configured for QSPI
flash boot mode and rebuilt. By default, the Boot option is SD boot.</p>
<p><strong>TIP:</strong> <em>The ZIP file that accompanies this document contains the
prebuilt images. If you prefer, you can use these and skip to either</em>
<a class="reference external" href="#booting-linux-from-qspi-flash"><em>Booting Linux from QSPI Flash</em></a> <em>or
<a class="reference external" href="#booting-linux-from-the-sd-card">Booting Linux from the SD Card</a>, as
appropriate to your design.</em></p>
</li>
<li><p>Run the following steps on a Linux machine to change the boot mode
to QSPI flash.</p>
<p>a.  Change to the root directory of your PetaLinux project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``\$ cd \&lt;plnx-proj-root\&gt;``
</pre></div>
</div>
<p>b.  Launch the top-level system configuration menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``\$ petalinux-config``
</pre></div>
</div>
<p>c.  Select Subsystem AUTO Hardware Settings.</p>
<p>d.  Select Advanced Bootable Images Storage Settings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="o">.</span>  <span class="n">Select</span> <span class="o">**</span><span class="n">boot</span> <span class="n">image</span> <span class="n">settings</span><span class="o">**.</span>

<span class="n">ii</span><span class="o">.</span> <span class="n">Select</span> <span class="o">**</span><span class="n">Image</span> <span class="n">Storage</span> <span class="n">Media</span><span class="o">**.</span>

<span class="n">iii</span><span class="o">.</span> <span class="n">Select</span> <span class="n">boot</span> <span class="n">device</span> <span class="k">as</span> <span class="o">**</span><span class="n">primary</span> <span class="n">flash</span><span class="o">**.</span>
</pre></div>
</div>
<p>e.  Under the <strong>Advanced Bootable Images Storage Settings</strong> sub-menu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="o">.</span>  <span class="n">Select</span> <span class="o">**</span><span class="n">kernel</span> <span class="n">image</span> <span class="n">settings</span><span class="o">**.</span>

<span class="n">ii</span><span class="o">.</span> <span class="n">Select</span> <span class="o">**</span><span class="n">Image</span> <span class="n">Storage</span> <span class="n">Media</span><span class="o">**.</span>

<span class="n">iii</span><span class="o">.</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">storage</span> <span class="n">device</span> <span class="k">as</span> <span class="o">**</span><span class="n">primary</span> <span class="n">flash</span><span class="o">**.</span>
</pre></div>
</div>
<p>f.  Save the configuration settings and exit the configuration wizard.</p>
<p>g.  Rebuild using the petalinux-build command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>***Note*:** For more information, refer to the *PetaLinux Tools
Documentation: Reference Guide*
([UG1144](https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bd%3Dug1144-petalinux-tools-reference-guide.pdf)).
</pre></div>
</div>
</li>
<li><p>Program QSPI flash with the Boot Image Using JTAG and U-Boot
Command.</p></li>
<li><p>Boot Linux from QSPI flash.</p></li>
</ol>
<div class="section" id="create-the-first-stage-boot-loader-executable-file">
<h4>Create the First Stage Boot Loader Executable File<a class="headerlink" href="#create-the-first-stage-boot-loader-executable-file" title="Permalink to this headline">¶</a></h4>
<ol>
<li><p>Open the Vitis software platform.</p></li>
<li><p>Check that the Target Communication Frame (TCF) (hw_server.exe)
agent is running on your Windows machine. If it is not, in the
Vitis software platform, select <strong>Xilinx → XSCT Console</strong>.</p></li>
<li><p>In the XSCT Console view, type Connect. A message appears, stating that the hw_server application started, or, if it is already running, you will see tcfchan#, as shown in the following figure.</p>
<p><img alt="../../_images/image651.jpeg" src="../../_images/image651.jpeg" /></p>
</li>
<li><p>In the Vitis software platform, select <strong>File → New → Application
Project</strong>. The New Application Project wizard opens.</p></li>
<li><p>Use the information the following table to make your selections in
the wizard screens.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>Platform</p>
</blockquote></td>
<td><blockquote>
<p>Select a platform from repository</p>
</blockquote></td>
<td><blockquote>
<p>Click <strong>hw_platform [custom]</strong>.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<p>Application Project Details</p>
</blockquote></td>
<td><blockquote>
<p>Application project name</p>
</blockquote></td>
<td><blockquote>
<p>Enter fsbl</p>
</blockquote></td>
</tr>
<tr class="odd">
<td></td>
<td><blockquote>
<p>Select target processor for the Application project</p>
</blockquote></td>
<td><blockquote>
<p>Select <strong>ps7_cortexa9_0</strong>.</p>
</blockquote></td>
</tr>
</tbody>
</table><table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Domain</td>
<td>Select a domain</td>
<td>Click <strong>standalone on ps7_cortexa9_0</strong>.</td>
</tr>
<tr class="even">
<td>Templates</td>
<td>Available Templates</td>
<td>Zynq FSBL</td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>Finish</strong>. If a pop up message comes up that states “This
application required xilffs library in Board Support Package”,
add the xilffs library to the BSP and then and repeat the above
steps to create an FSBL standalone application.</p>
<p>The New Application Project wizard closes. The Vitis software platform
creates the fsbl application project under the Explorer view. For
generating fsbl.elf build the project by right-clicking on the FSBL
project and selecting <strong>Build Project</strong>.</p>
</li>
</ol>
</div>
<div class="section" id="make-a-linux-bootable-image-for-qspi-flash">
<h4><em>Make a Linux Bootable Image for QSPI Flash</em><a class="headerlink" href="#make-a-linux-bootable-image-for-qspi-flash" title="Permalink to this headline">¶</a></h4>
<ol>
<li><p>In the Vitis software platform, select <strong>Xilinx → Create Boot Image</strong> to open the Create Boot Image wizard.</p>
<p><img alt="../../_images/image86.jpeg" src="../../_images/image86.jpeg" /></p>
</li>
<li><p>From the <strong>Architecture</strong> drop-down list, select <strong>Zynq</strong>.</p></li>
<li><p>Click <strong>Browse</strong> next to the <strong>Output BIF file path</strong> field, and
navigate to your output.bif file.</p></li>
<li><p>Click <strong>Browse</strong> next to the <strong>Output path</strong> field, and navigate to
your BOOT.bin file.</p>
<p><strong><em>Note</em>:</strong> The QSPI Boot file, BOOT.bin, is available in the ZIP file
that accompanies this guide. See <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This
Tutorial</a>.</p>
</li>
<li><p>Click <strong>Add</strong> to add the following boot image partitions:</p>
<ul class="simple">
<li><p>fsbl.elf (bootloader).</p></li>
</ul>
<p><strong><em>Note</em>:</strong> You can find fsbl.elf in &lt;project dir&gt;/fsbl/Debug.
Alternatively, you can use fsbl.elf from the file you downloaded in
<a class="reference external" href="#requirements">Requirements</a>.</p>
<ul class="simple">
<li><p>Add Bitstream file tutorial_bd_wrapper.bit.</p></li>
<li><p>Add U-Boot image u-boot.elf.</p></li>
<li><p>Add the PetaLinux output image, image.ub, and provide the offset
0x520000 (image.ub: PetaLinux image consists of kernel image,
device tree blob and minimal rootfs).</p></li>
</ul>
</li>
<li><p>Click <strong>Create Image</strong> to create the BOOT.bin file in the specified
output path folder.</p></li>
</ol>
</div>
<div class="section" id="program-qspi-flash-with-the-boot-image-using-jtag">
<h4><em>Program QSPI Flash with the Boot Image Using JTAG</em><a class="headerlink" href="#program-qspi-flash-with-the-boot-image-using-jtag" title="Permalink to this headline">¶</a></h4>
<p>You can program QSPI Flash with the boot image using JTAG.</p>
<ol>
<li><p>Power on the ZC702 Board.</p></li>
<li><p>If a serial terminal is not already open, connect the serial
terminal with the baud rate set to 115200.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Select <strong>Xilinx → XSCT Console</strong> to open the XSCT tool.</p></li>
<li><p>From the XSCT prompt, do the following:</p>
<p>a.  Type connect to connect with the PS section.</p>
<p>b.  Type targets to get the list of target processors.</p>
<p>c.  Type ta 2 to select the processor CPU1.</p>
<p>d.  Type dow fsbl.elf to download the FSBL image.</p>
<p>e.  Type con and then stop.</p>
<p>f.  Type dow u-boot.elf to download the Linux U-Boot.</p>
<p>g.  Type dow -data BOOT.bin 0x08000000 to download the Linux
bootable image to the target memory at location 0x08000000.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">just</span> <span class="n">downloaded</span> <span class="n">the</span> <span class="n">binary</span> <span class="n">executable</span> <span class="n">to</span> <span class="n">DDR</span> <span class="n">memory</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span>
<span class="n">download</span> <span class="n">the</span> <span class="n">binary</span> <span class="n">executable</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">DDR</span> <span class="n">memory</span><span class="o">.</span>
</pre></div>
</div>
<p>h.  Type con to start execution of U-Boot. U-Boot begins booting. On the serial terminal, the autoboot countdown message appears:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``Hit any key to stop autoboot: 3``
</pre></div>
</div>
</li>
<li><p>Press Enter. Automatic booting from U-Boot stops and the U-Boot command prompt appears on the serial terminal.</p></li>
<li><p>Do the following steps to program U-Boot with the bootable image:</p>
<p>a.  At the prompt, type sf probe 0 0 0 to select the QSPI Flash.</p>
<p>b.  Type sf erase 0 0x01000000 to erase the Flash data.This command completely erases 16 MB of on-board QSPI Flash memory.</p>
<p>c.  Type sf write 0x08000000 0 0xffffff to write the boot image on the
QSPI Flash.</p>
<p>Note that you already copied the bootable image at DDR location
0x08000000. This command copied the data, of the size equivalent to
the bootable image size, from DDR to QSPI location 0x0.</p>
<p>For this example, because you have 16 MB of Flash memory, you copied
16 MB of data. You can change the argument to adjust the bootable
image size.</p>
</li>
<li><p>Power off the board and follow the booting steps described in the
following section.</p></li>
</ol>
</div>
<div class="section" id="program-qspi-flash-with-the-flash-programming-tool">
<h4>Program QSPI Flash with the Flash Programming Tool<a class="headerlink" href="#program-qspi-flash-with-the-flash-programming-tool" title="Permalink to this headline">¶</a></h4>
<p>Following the steps below, you can program QSPI Flash with the flash
programming tool in the Vitis software platform:</p>
<ol class="simple">
<li><p>Power on the ZC702 Board.</p></li>
<li><p>If a serial terminal is not open, connect the serial terminal with
the baud rate set to 115200.</p></li>
</ol>
<p><strong><em>Note</em>:</strong> This is the baud rate to which the UART is programmed on
Zynq devices.</p>
<ol>
<li><p>Select <strong>Xilinx → Program Flash</strong>.</p></li>
<li><p>Select the BOOT.bin file to flash and select <strong>Program</strong> (see the following figure).</p>
<p><img alt="../../_images/image87.png" src="../../_images/image87.png" /></p>
</li>
</ol>
<p>On successful programming, a message appears in the console window
saying Flash Operation Successful.</p>
<ol class="simple">
<li><p>Power off the board and follow the booting steps in <a class="reference external" href="#booting-linux-from-qspi-flash">Booting Linux
from QSPI Flash</a> or <a class="reference external" href="#booting-linux-from-the-sd-card">Booting Linux
from the SD Card</a>, as appropriate
to your design.</p></li>
</ol>
</div>
<div class="section" id="booting-linux-from-qspi-flash">
<h4><em>Booting Linux from QSPI Flash</em><a class="headerlink" href="#booting-linux-from-qspi-flash" title="Permalink to this headline">¶</a></h4>
<ol>
<li><p>After you program the QSPI Flash, set the SW16 switch on your board as shown in the following figure.</p>
<p><img alt="../../_images/image88.jpeg" src="../../_images/image88.jpeg" /></p>
</li>
<li><p>Connect the Serial terminal using an 115200 baud rate setting.</p>
<p><strong><em>Note</em>:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Switch on the board power.</p>
<p>A Linux booting message appears on the serial terminal. After booting
finishes, the root&#64;xilinx-zc702-2020_1:~# prompt appears. Enter the
login and password as root when prompted.</p>
</li>
<li><p>Check the Board IP address connectivity as described in <a class="reference external" href="#booting-linux-using-jtag-mode">Booting Linux Using JTAG Mode</a>.</p>
<p>For Linux Application creation and debugging, refer to <a class="reference external" href="#example-design-debugging-the-linux-application-using-the-vitis-software-platform">Example Design: Debugging the Linux Application Using the Vitis Software Platform</a>.</p>
</li>
</ol>
</div>
<div class="section" id="booting-linux-from-the-sd-card">
<h4>Booting Linux from the SD Card<a class="headerlink" href="#booting-linux-from-the-sd-card" title="Permalink to this headline">¶</a></h4>
<ol>
<li><p>Change the SW16 switch setting as shown in the following figure.</p>
<p><img alt="../../_images/image89.jpeg" src="../../_images/image89.jpeg" /></p>
</li>
<li><p>Make the board settings as described in <a class="reference external" href="#booting-linux-using-jtag-mode">Booting Linux Using JTAG
Mode</a>.</p></li>
<li><p>Create a first stage bootloader (FSBL) for your design as described
in <a class="reference external" href="#create-the-first-stage-boot-loader-executable-file">Create the First Stage Boot Loader Executable
File</a>.</p>
<p><strong><em>Note</em>:</strong> If you do not need to change the default FSBL image, you
can use the fsbl.elf file that you downloaded as part of the ZIP file
for this guide. See <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for This
Tutorial</a>.</p>
</li>
<li><p>In the Vitis IDE, select <strong>Xilinx → Create Boot Image</strong> to open the
Create Boot Image wizard.</p></li>
<li><p>Add fsbl.elf, bit file (if any), and u-boot.elf.</p></li>
<li><p>Provide the output folder path in the Output folder field.</p></li>
<li><p>Click <strong>Create Image</strong>. The Vitis software platform generates the
BOOT.bin file in the specified folder.</p>
<p><img alt="../../_images/image90.jpeg" src="../../_images/image90.jpeg" /></p>
</li>
<li><p>Copy BOOT.bin and image.ub to the SD card.</p>
<p><img alt="../../_images/image91.png" src="../../_images/image91.png" /></p>
<p><strong>IMPORTANT!</strong> <em>Do not change the file names. U-Boot searches for
these file names in the SD card while booting the system.</em></p>
</li>
<li><p>Turn on the power to the board and check the messages on the Serial
terminal. The root&#64;plnx_arm:~# prompt appears after Linux booting is complete on the target board.</p></li>
<li><p>Set the board IP address and check the connectivity as described in
<a class="reference external" href="#booting-linux-using-jtag-mode">Booting Linux Using JTAG Mode</a>.</p></li>
</ol>
<p>For Linux application creation and debugging, see <a class="reference external" href="#example-design-debugging-the-linux-application-using-the-vitis-software-platform">Example Design: Debugging the Linux Application Using the Vitis Software Platform</a>.</p>
<p>© Copyright 2015–2020 Xilinx, Inc.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 19, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>