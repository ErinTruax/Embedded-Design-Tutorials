


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/Zynq7000-EDT/docs/9-linux-aware-debugging.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Linux OS Aware Debugging Using the Vitis Software Platform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Zynq7000-EDT/docs/9-linux-aware-debugging.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="right">
            Read this page in other languages:<a href="../docs-jp/9-linux-aware-debugging.md">日本語</a>    <table style="width:100%"><table style="width:100%">
  <tr><th width="100%" colspan="6"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Zynq-7000 SoC Embedded Design Tutorial 2020.2 (UG1165)</h1>
</th>  </tr>
  <tr>
    <td width="33%" align="center"><a href="../README.md">1. Introduction</a></td>
    <td width="33%" align="center"><a href="2-using-zynq.md">2. Using the Zynq SoC Processing System</a></td>
    <td width="33%" align="center"><a href="3-using-gp-port-zynq.md">3. Using the GP Port in Zynq Devices</a></td>
</tr>
<tr><td width="33%" align="center"><a href="4-debugging-vitis.md">4. Debugging with the Vitis Software Platform</a></td>
    <td width="33%" align="center"><a href="5-using-hp-port.md">5. Using the HP Slave Port with AXI CDMA IP</a></td>
    <td width="33%" align="center"><a href="6-linux-booting-debug.md">6. Linux Booting and Debug in the Vitis Software Platform</a></td>
  </tr>
  <tr>
      <td width="33%" align="center"><a href="7-custom-ip-driver-linux.md">7. Creating Custom IP and Device Driver for Linux
  </a></td>
      <td width="33%" align="center"><a href="8-sw-profiling.md">8. Software Profiling Using the Vitis Software Platform</a></td>    
      <td width="33%" align="center">9. Linux Aware Debugging</td>    
    </tr>
</table><ul class="simple">
<li><p><a class="reference external" href="#linux-os-aware-debugging-using-the-vitis-software-platform">Linux OS Aware Debugging Using the Vitis Software Platform</a></p>
<ul>
<li><p><a class="reference external" href="#setting-up-linux-os-aware-debugging">Setting Up Linux OS Aware Debugging</a></p>
<ul>
<li><p><a class="reference external" href="#configure-the-linux-kernel">Configure the Linux Kernel</a></p></li>
<li><p><a class="reference external" href="#creating-the-hello-world-linux-application-to-exercise-the-os-aware-debugging-feature">Creating the Hello World Linux Application to Exercise the OS Aware Debugging Feature</a></p></li>
<li><p><a class="reference external" href="#debugging-linux-processes-and-threads-using-os-aware-debug">Debugging Linux Processes and Threads Using OS Aware Debug</a></p></li>
<li><p><a class="reference external" href="#debugging-the-linux_hello-application-with-os-aware-debug">Debugging the linux_hello Application with OS Aware Debug</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="linux-os-aware-debugging-using-the-vitis-software-platform">
<h1>Linux OS Aware Debugging Using the Vitis Software Platform<a class="headerlink" href="#linux-os-aware-debugging-using-the-vitis-software-platform" title="Permalink to this headline">¶</a></h1>
<p>OS-aware debugging helps you to visualize OS-specific information such
as task lists, processes/ threads that are currently running,
process/thread-specific stack trace, registers, and variables view.</p>
<p>To support this, the debugger needs to be aware of the operating
system used on the target and know about the intrinsic nature of the
OS.</p>
<p>With OS-aware debugging, you can debug the OS running on the processor
cores and the processes/threads running on the OS simultaneously.</p>
<p>The Vitis unified software platform supports the OS-aware debug
feature for Linux OS running on Zynq®-7000 SoC devices.</p>
<div class="section" id="setting-up-linux-os-aware-debugging">
<h2>Setting Up Linux OS Aware Debugging<a class="headerlink" href="#setting-up-linux-os-aware-debugging" title="Permalink to this headline">¶</a></h2>
<p>This section describes setting up OS aware debug for a Zynq board
running Linux OS.</p>
<div class="section" id="configure-the-linux-kernel">
<h3>Configure the Linux Kernel<a class="headerlink" href="#configure-the-linux-kernel" title="Permalink to this headline">¶</a></h3>
<p>To be able to read the process list or to allow process or module
debugging, the Linux awareness accesses the internal kernel structures
using the kernel symbols. Therefore the kernel symbols must be
available; otherwise Linux aware debugging is not possible. The
vmlinux file must be compiled with debugging information enabled as
shown in <a class="reference external" href="#configure-the-linux-kernel">Configure the Linux Kernel</a>.</p>
<p><strong><em>Note</em>:</strong> The vmlinux file is a statically linked executable file
that contains the Linux kernel along with corresponding debug
information.</p>
<p>In PetaLinux, enable the below configuration options before compiling
the Linux Kernel using the PetaLinux Tools build configuration
command:</p>
<p><code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_KERNEL=y</span></code>
<code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_INFO=y</span></code></p>
<p>Follow the below steps to configure the Linux kernel to build with the
debug information.</p>
<ol>
<li><p>In the Linux machine terminal window, go to the directory of your
PetaLinux project.</p>
<p><code class="docutils literal notranslate"><span class="pre">\$</span> <span class="pre">cd</span> <span class="pre">\&lt;plnx-proj-root\&gt;</span></code></p>
</li>
<li><p>Launch the configuration menu to configure the Linux kernel.</p>
<p><code class="docutils literal notranslate"><span class="pre">\$</span> <span class="pre">petalinux-config</span> <span class="pre">-c</span> <span class="pre">kernel</span></code></p>
</li>
<li><p>Select <strong>Kernel hacking</strong>.</p>
<ul class="simple">
<li><p>Select Compile-time checks and compiler options.</p></li>
<li><p>Select Compile the kernel with debug info.</p></li>
</ul>
<p><img alt="../../_images/image106.png" src="../../_images/image106.png" /></p>
</li>
<li><p>Save configuration. This sets the Linux Kernel configuration file
options to the following settings. You can verify that these
options are enabled by looking in the configuration file:</p></li>
<li><p>Launch the configuration menu to configure the system-level options:</p>
<p><code class="docutils literal notranslate"><span class="pre">\$</span> <span class="pre">petalinux-config</span></code></p>
<p>a.  Select <strong>Image Packaging Configuration</strong>.</p>
<p>b.  Select INITRD for <strong>Root filesystem type</strong>.</p>
<p>c.  Save configuration.</p>
</li>
<li><p>Build the PetaLinux using the PetaLinux build command
petalinux-build.</p></li>
<li><p>After PetaLinux builds successfully, copy the vmlinux file to your
host machine. This file is needed for the debugger to refer all
Linux kernel symbols. Vmlinux generates under &lt;petalinux project file&gt;/images/linux/vmlinux.</p></li>
<li><p>Copy Vmlinux to the host machine to use with the Vitis software
platform for debugging the Linux Kernel.</p></li>
<li><p>Copy the Linux kernel source code to the host machine for debugging.
The Linux kernel is present in
&lt;petalinux-project&gt;/build/tmp/work-shared/zc702-zynq7/
kernel-source.</p></li>
</ol>
<p><strong><em>Note</em>:</strong> This document is composed and exercised using the Windows
host machine, so it needs to copy the Linux source code to a location
that is accessible for the Vitis tool running locally on Windows host
machine.</p>
</div>
<div class="section" id="creating-the-hello-world-linux-application-to-exercise-the-os-aware-debugging-feature">
<h3>Creating the Hello World Linux Application to Exercise the OS Aware Debugging Feature<a class="headerlink" href="#creating-the-hello-world-linux-application-to-exercise-the-os-aware-debugging-feature" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Open the Vitis software platform.</p></li>
<li><p>Select <strong>File → New → Application Project</strong>. The New Application
Project wizard opens.</p></li>
<li><p>Use the information below to make your selections in the wizard
screens.</p>
<table>
<thead>
<tr class="header">
<th><blockquote>
<p><strong>Wizard Screen</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>System Property</strong></p>
</blockquote></th>
<th><blockquote>
<p><strong>Setting or Command to Use</strong></p>
</blockquote></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Platform</td>
<td>Select a platform from repository</td>
<td>Click <strong>hw_platform [custom]</strong>.</td>
</tr>
<tr class="even">
<td>Application Project Details</td>
<td>Application project name</td>
<td>Enter linux_hello</td>
</tr>
<tr class="odd">
<td></td>
<td>Select target processor for the Application project</td>
<td>Select <strong>ps7_cortexa9 SMP</strong>.</td>
</tr>
<tr class="even">
<td>Domain</td>
<td>Select a domain</td>
<td>Click <strong>linux_application_domain</strong>.</td>
</tr>
<tr class="odd">
<td></td>
<td>Application settings</td>
<td>If known, enter the sysroot, root FS, and kernel image paths. Otherwise, leave these options blank.</td>
</tr>
<tr class="even">
<td>Templates</td>
<td>Available Templates</td>
<td>Linux Empty Application</td>
</tr>
</tbody>
</table></li>
<li><p>Click <strong>Finish</strong>.</p></li>
<li><p>In the Explorer view, expand the linux_hello project, right-click
the src directory, and select <strong>Import</strong> to open the Import view.</p></li>
<li><p>Expand <strong>General</strong> in the Import view and select <strong>File System</strong>.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
<li><p>Select <strong>Browse</strong>.</p></li>
<li><p>Navigate to your design files folder and select the OSA folder and
click <strong>OK</strong>.</p>
<p><strong><em>Note</em>:</strong> For more information about downloading the design files
for this tutorial, see <a class="reference external" href="2-using-zynq.md#design-files-for-this-tutorial">Design Files for this Tutorial</a>.</p>
</li>
<li><p>Add the linux_hello.c file and click <strong>Finish</strong>.</p>
<p>The Vitis software platform automatically builds the application and
displays the status in the console window.</p>
</li>
<li><p>Copy linux_hello.elf to an SD card.</p></li>
</ol>
</div>
<div class="section" id="debugging-linux-processes-and-threads-using-os-aware-debug">
<h3>Debugging Linux Processes and Threads Using OS Aware Debug<a class="headerlink" href="#debugging-linux-processes-and-threads-using-os-aware-debug" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Boot Linux as described in <a class="reference external" href="6-linux-booting-debug.md#booting-linux-from-the-sd-card">Booting Linux from the SD
Card</a>.</p></li>
<li><p>Create a Debug configuration.</p></li>
<li><p>Right-click <strong>linux_hello</strong> and select <strong>Debug as→ Debug
Configurations</strong>.</p>
<p>The Debug Configurations wizard opens, as shown in the following
figure.</p>
<p><img alt="../../_images/image107.jpeg" src="../../_images/image107.jpeg" /></p>
</li>
<li><p>In Main window, from the <strong>Debug Type</strong> drop-down list, select
<strong>Attach to running target</strong>.</p></li>
<li><p>From the <strong>Connection</strong> drop-down list, select <strong>Local</strong>.</p></li>
<li><p>Click <strong>Debug</strong>.</p></li>
<li><p>If the Confirm Perspective Switch dialog box appears, click <strong>Yes</strong>. Debugger_linux_hello-Default opens in the Debug view, as shown in the
following figure.</p>
<p><img alt="../../_images/image108.png" src="../../_images/image108.png" /></p>
</li>
<li><p>Set up the Linux kernel symbol file and enable the Linux OS
awareness in the debug configuration.</p>
<p>There are multiple options provided by the Vitis software platform to
enable Linux OS awareness feature enablement and debugging the
applications. The following options are listed in the Symbol File
dialog box.</p>
<ul>
<li><p><strong>Enable Linux OS Awareness:</strong> This option enables the OS awareness.</p></li>
<li><p>Auto refresh on exec:</p>
<p>When this option is selected, all running processes are refreshed and
displayed in the Debug view.</p>
<p>When this option is disabled, the new processes are not displayed in
the Debug view.</p>
</li>
<li><p>Auto refresh on suspend:</p>
<p>When this option is selected, all processes will be re-synced whenever the processor suspends.</p>
<p>When this option is disabled, only the current process will be
re-synced.</p>
</li>
</ul>
</li>
<li><p>In the Debug view, right-click <strong>Debugger_linux_hello-Debug
(Local)</strong> and select <strong>Edit Debugger_linux_hello-Default
(Local)</strong>.</p></li>
<li><p>Click the <strong>Symbol Files</strong> tab.</p></li>
<li><p>Select <strong>/APU/Arm_Cortex_A9MPCore #0</strong> from the Debug context
drop-down menu and click <strong>Add</strong>. The Symbol File dialog box opens.</p></li>
<li><p>Click the browse button <img alt="../../_images/image109.png" src="../../_images/image109.png" />.</p></li>
<li><p>Provide the path of the vmlinux file that you saved locally on the
Windows host machine in the previous section, and check the box
for <strong>Enable OS awareness- the file is an OS kernel</strong>, <strong>Auto
refresh on exec</strong>, and <strong>Auto refresh on suspend</strong> as shown in the
following figure.</p>
<p><img alt="../../_images/image110.png" src="../../_images/image110.png" /></p>
</li>
<li><p>Click <strong>OK</strong>.</p>
<p>The Symbol File window closes.</p>
</li>
<li><p>Click <strong>Continue</strong> and then click <strong>Save</strong> for saving the
configuration changes. The Debug view opens, as shown in the
following figure.</p>
<p><img alt="../../_images/image111.png" src="../../_images/image111.png" /></p>
<p>You can see the Linux Kernel and list of processes running on the
target.</p>
<p><strong><em>Note</em>:</strong> Because the Linux Kernel is built on a different system
(Linux Machine) than the host machine (Windows Machine) on which we
are exercising the Linux OS aware application debug, symbol files path
mapping information should be added.</p>
<p>Path mapping will enable you to get source-level debugging and see
stack trace, variables, setting up source level breakpoints, and so
on.</p>
<p>The debugger uses the Path Map setting to search and load symbols
files for all executable files and shared libraries in the system.</p>
<p><img alt="../../_images/image112.jpeg" src="../../_images/image112.jpeg" /></p>
</li>
<li><p>Set up the Path Map.</p>
<p>a.  Click the <strong>Path Map</strong> tab.</p>
<p>b.  Click <strong>Add</strong>.</p>
<p>c.  The source path for the kernel is the compilation directory path
from the Linux machine as shown in the previous figure. For
example, &lt;petalinux-project&gt;/build/tmp/
work-shared/zc702-zynq7/kernel-source.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">destination</span> <span class="n">path</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">host</span> <span class="n">location</span> <span class="n">where</span> <span class="n">you</span> <span class="n">copied</span> <span class="n">kernel</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">earlier</span> <span class="n">step</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> \<span class="o">&lt;</span><span class="n">local</span> <span class="n">directory</span>\<span class="o">&gt;/</span><span class="n">linux</span><span class="o">-</span><span class="n">xlnx</span><span class="o">.</span>
</pre></div>
</div>
<p>d.  Click <strong>Apply</strong> to apply the changes.</p>
<p>e.  Click <strong>Continue</strong> to debug.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>![](./media/image113.jpeg)
</pre></div>
</div>
</li>
<li><p>Debug a Linux Process or thread.</p></li>
</ol>
<p>As shown in Debugging Linux Processes and Threads Using OS Aware
Debug](#debugging-linux-processes-and-threads-using-os-aware-debug) ,
the list of processes running on the target is displayed. You can
right-click any process and click <strong>Suspend</strong>. Using this method, you
can exercise debugging features such as watch stack trace, registers,
adding break points, and so on.</p>
<p>In the following figure, the suspended process is named 1 init.</p>
<p><img alt="../../_images/image114.jpeg" src="../../_images/image114.jpeg" /></p>
<p><strong><em>Note</em>:</strong> The addresses shown on this page might differ slightly
from the addresses shown on your system.</p>
</div>
<div class="section" id="debugging-the-linux-hello-application-with-os-aware-debug">
<h3>Debugging the linux_hello Application with OS Aware Debug<a class="headerlink" href="#debugging-the-linux-hello-application-with-os-aware-debug" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Mount an SD card using mount /dev/mmcblk0p1 /mnt.</p></li>
<li><p>Run the /mnt/linux_hello.elf application from the terminal as shown in the following figure.</p>
<p><img alt="../../_images/image115.png" src="../../_images/image115.png" /></p>
</li>
<li><p>To debug the linux_hello application you created in the previous
section using OS aware debug, follow the steps described in
<a class="reference external" href="#debugging-linux-processes-and-threads-using-os-aware-debug">Debugging Linux Processes and Threads Using OS Aware Debug</a>, and in addition, add the path mappings for the linux_hello application as given in the following figure.</p>
<p>The source path is /linux_hello.elf. The destination path is &lt;vitis-
workspace&gt;linux_hello/Debug/linux_hello.elf.</p>
<p><img alt="../../_images/image116.jpeg" src="../../_images/image116.jpeg" /></p>
</li>
<li><p>In the Debug view, right-click on <strong>Debugger_linux_hello-Default
(Local)</strong> and select <strong>Relaunch</strong>.</p></li>
<li><p>In the Vitis debugger, do the following:</p>
<p>a.  Observe the running application as one of the processes/threads
in kernel.</p>
<p>b.  Right-click on the linux_hello.elf thread and click <strong>Suspend</strong>
to suspend application.</p>
<p>c.  Add a breakpoint.</p>
</li>
</ol>
<p>These actions are shown in the following figure.</p>
<p><img alt="../../_images/image117.jpeg" src="../../_images/image117.jpeg" /></p>
<p>When the control hits the breakpoint, the Debug view updates with the
information of the linux_hello.elf process.</p>
<p>The Debug View also shows the file, function, and the line information
of the breakpoint hit. A thread label includes the name of a CPU core,
if the thread is currently running on a core.</p>
<p>You can perform source-level debugging, such as stepping in, stepping
out, watching variables, stack trace, and registers.</p>
<p>You can perform process/thread level debugging, including insert
breakpoints, step in, step out, watch variables, stack trace, and so
on.</p>
<p><strong><em>Note</em>:</strong> One limitation with this process is that the target side
path for a binary file does not include a mount point path. For
example, when the linux_hello process is located on an SD card, which
is mounted at / mnt, the debugger shows the file as /linux_hello.elf
instead of /mnt/linux_hello.elf.</p>
<p><strong><em>Note</em>:</strong> There is an additional way to Enable Linux OS Awareness in
the Vitis software platform using an XSCT command line command. For
information about this command, refer to the osa command help in
<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?t=vitis%2Bdoc%3Bv%3D2020.1%3Bd%3Dupu1569395223804.html">Xilinx Software Command-Line
Tool</a>
in the Embedded Software Development flow of the <em>Vitis Unified
Software Platform Documentation</em> (UG1416).</p>
<p>© Copyright 2015–2020 Xilinx, Inc.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 19, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>