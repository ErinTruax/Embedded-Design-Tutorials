


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">Master</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/ZynqMPSoC-EDT/docs/5-build-linux-sw-for-ps.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Example Project 3: Create Linux Images using PetaLinux</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/ZynqMPSoC-EDT/docs/5-build-linux-sw-for-ps.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="right">
            Read this page in other languages:<a href="../docs-jp/4-build-sw-for-ps-subsystems.md">日本語</a>    <table style="width:100%"><table style="width:100%">
  <tr><th width="100%" colspan="6"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Zync UltraScale+ MPSoC Embedded Design Tutorial 2020.2 (UG1209)</h1>
</th>  </tr>
  <tr>
    <td width="17%" align="center"><a href="../README.md">1. Introduction</a></td>
    <td width="16%" align="center"><a href="2-getting-started.md">2. Getting Started</a></td>
    <td width="17%" align="center"><a href="3-system-configuration.md">3. Zynq UltraScale+ MPSoC System Configuration</a></td>
    <td width="17%" align="center">4. Build Software for PS Subsystems</td>
</tr>
<tr>
    <td width="17%" align="center">5. Building Linux Applications for PS</td>
    <td width="16%" align="center"><a href="6-debugging-with-vitis-debugger.md">6. Debugging Standalone Applications</a></td>
    <td width="17%" align="center"><a href="7-debugging-linux-app.md">7. Debugging Linux Applications</a></td>
    <td width="17%" align="center"><a href="8-boot-and-configuration.md">8. Boot and Configuration</a></td>    
  </tr>
</table><div class="section" id="example-project-3-create-linux-images-using-petalinux">
<h1>Example Project 3: Create Linux Images using PetaLinux<a class="headerlink" href="#example-project-3-create-linux-images-using-petalinux" title="Permalink to this headline">¶</a></h1>
<p>The earlier example highlighted creation of the bootloader images and
bare-metal applications for APU, RPU, and PMU using the Vitis IDE. In
this example, you will configure and build Linux Operating System
Platform for Arm Cortex-A53 core based APU on Zynq UltraScale+. You
can configure and build Linux images using the PetaLinux tool flow,
along with the board-specific BSP.</p>
<blockquote>
<div><p><strong>IMPORTANT!</strong>
&gt;1.  This example needs a Linux Host
machine. <em>PetaLinux Tools Documentation: Reference Guide</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest%3Bd%3Dug1144-petalinux-tools-reference-guide.pdf">UG1144</a>)
for information about dependencies for PetaLinux 2020.2.
&gt;1.  This example uses the ZCU102 PetaLinux BSP to create a PetaLinux
project. Ensure that you have downloaded the ZCU102 BSP for
PetaLinux as instructed in <a class="reference external" href="#petalinux-tools-1">PetaLinux Tools</a>.</p>
</div></blockquote>
<ol>
<li><p>Create a PetaLinux project using the following command:</p>
<p>This creates a PetaLinux project directory, for example,
xilinx-zcu102-2020.2.</p>
<blockquote>
<div><p><strong><em>Note</em>:</strong> xilinx-zcu102-v2020.2-final.bsp is the PetaLinux BSP for
ZCU102 Production Silicon Rev1.0 Board. Use
xilinx-zcu102-ZU9-ES2-Rev1.0-v2020.2-final.bsp, if you are using ES2
Silicon on Rev 1.0 board.</p>
</div></blockquote>
</li>
<li><p>Change to the PetaLinux project directory using the following
command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">cd</span> <span class="pre">xilinx-zcu102-2020.2</span></code></p>
<p>The ZCU102 PetaLinux-BSP is the default ZCU102 Linux BSP. For this
example, you reconfigure the PetaLinux Project based on theZynq
UltraScale+ hardware platform that you configured using Vivado Design
Suite in <a class="reference internal" href="3-system-configuration.html"><span class="doc">Zynq UltraScale+ MPSoC Processing System Configuration</span></a>.</p>
</li>
<li><p>Copy the hardware platform edt_zcu102_wrapper.xsa to the Linux Host
machine.</p></li>
<li><p>Reconfigure the project using the following command:</p>
<p>This command opens the PetaLinux Configuration window. If required,
make changes in the configuration. For this example, the default
settings from the BSP are sufficient to generate required boot images.</p>
<p>The following steps will verify if PetaLinux is configured to create
Linux and boot images for SD Boot.</p>
</li>
<li><p>Select Subsystem AUTO Hardware Settings.</p></li>
<li><p>Under Advanced Bootable Images Storage Settings submenu, do the
following:</p>
<p>a.  Select <strong>boot image settings</strong>.</p>
<p>b.  Select <strong>Image Storage Media</strong>.</p>
<p>c.  Select <strong>primary sd</strong> as the boot device.</p>
</li>
<li><p>Under the Advanced Bootable Images Storage Settings submenu, do the
following:</p>
<p>a.  Select <strong>kernel image settings</strong>.</p>
<p>b.  Select <strong>Image Storage Media</strong>.</p>
<p>c.  Select <strong>primary sd</strong> as the storage device.</p>
</li>
<li><p>Under Subsystem AUTO Hardware Settings, select <strong>Memory Settings</strong>
and set the System Memory Size to <code class="docutils literal notranslate"><span class="pre">0x6FFFFFFF</span></code>.</p></li>
<li><p>Return to the main menu. In Image Packaging Configuration, set the
root file system type to INITRAMFS.</p></li>
<li><p>Save the configuration settings and exit the Configuration wizard.</p></li>
<li><p>Wait until PetaLinux reconfigures the project.</p>
<p>The following steps will build the Linux images, verify them, and
generate the boot image.</p>
</li>
<li><p>Modify the device tree to disable Heartbeat LED and SW19 push button
from the device tree, so that the RPU R5-0 can use the PS LED and
the SW19 switch for other designs in this tutorial. To do so, add
the following to the <code class="docutils literal notranslate"><span class="pre">system-user.dtsi</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">include</span><span class="o">/</span> <span class="s2">&quot;system-conf.dtsi&quot;</span>
<span class="o">/</span> <span class="p">{</span>
    <span class="n">gpio</span><span class="o">-</span><span class="n">keys</span> <span class="p">{</span> 
        <span class="n">sw19</span> <span class="p">{</span>
            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="o">&amp;</span><span class="n">uart1</span> <span class="p">{</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">system-user.dtsi</span></code> is located at
<code class="docutils literal notranslate"><span class="pre">&lt;PetaLinux-project&gt;/project-spec/meta-user/recipes-bsp/device-tree/files/system-user.dtsi</span></code>.</p>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">&lt;PetaLinux-project&gt;</span></code>, build the Linux images using the following
command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-build</span></code></p>
</li>
<li><p>After the above statement executes successfully, verify the images
and the timestamp in the images directory in the PetaLinux project
folder using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> images/linux/
$ ls -al
</pre></div>
</div>
</li>
<li><p>Generate the Boot image using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-package</span> <span class="pre">--boot</span> <span class="pre">--fsbl</span> <span class="pre">zynqmp_fsbl.elf</span> <span class="pre">--u-boot</span></code></p>
<p>This creates a <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> image file in the following directory:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;petalinux-project&gt;/images/linux/BOOT.BIN</span></code></p>
<p>The logs indicate that the above command includes PMU_FW and ATF in
BOOT.BIN. You can also add <code class="docutils literal notranslate"><span class="pre">--pmufw</span> <span class="pre">&lt;PMUFW_ELF&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">--atf</span> <span class="pre">&lt;ATF_ELF&gt;</span></code> in the above command. Refer <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-package</span> <span class="pre">--boot</span> <span class="pre">--help</span></code> for more details.</p>
<blockquote>
<div><p><strong><em>Note</em>:</strong> The option to add bitstream, that is <code class="docutils literal notranslate"><span class="pre">--fpga</span></code>, is missing
from the above command intentionally because so far the hardware
configuration is based pnly on PS with no design in PL. If a bitstream
is present in the design, <code class="docutils literal notranslate"><span class="pre">--fpga</span></code> can be added in the
petalinux-package command as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">petalinux</span><span class="o">-</span><span class="n">package</span> <span class="o">--</span><span class="n">boot</span> <span class="o">--</span><span class="n">fsbl</span> <span class="n">zynqmp_fsbl</span><span class="o">.</span><span class="n">elf</span> <span class="o">--</span><span class="n">fpga</span> <span class="n">system</span><span class="o">.</span><span class="n">bit</span> <span class="o">--</span><span class="n">pmufw</span> <span class="n">pmufw</span><span class="o">.</span><span class="n">elf</span> <span class="o">--</span><span class="n">atf</span> <span class="n">bl31</span><span class="o">.</span><span class="n">elf</span> <span class="o">--</span><span class="n">u</span><span class="o">-</span><span class="n">boot</span> <span class="n">u</span><span class="o">-</span><span class="n">boot</span><span class="o">.</span><span class="n">elf</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="section" id="verify-the-image-on-the-zcu102-board">
<h2>Verify the Image on the ZCU102 Board<a class="headerlink" href="#verify-the-image-on-the-zcu102-board" title="Permalink to this headline">¶</a></h2>
<p>To verify the image, follow these steps:</p>
<ol>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>, <code class="docutils literal notranslate"><span class="pre">image.ub</span></code>, and <code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> files to the SD card. Here
<code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> is read by U-Boot to load kernel and rootfs.</p></li>
<li><p>Load the SD card into the ZCU102 board, in the J100 connector.</p></li>
<li><p>Connect a Micro USB cable from ZCU102 Board USB UART port (J83), to
USB port on the host Machine.</p></li>
<li><p>Configure the Board to Boot in SD-Boot mode by setting switch SW6 as
shown in the following figure.</p>
<p><img alt="../../_images/image432.jpeg" src="../../_images/image432.jpeg" /></p>
</li>
<li><p>Connect 12V Power to the ZCU102 6-Pin Molex connector.</p></li>
<li><p>Start a terminal session, using Tera
Term or Minicom depending on the host machine being used. set the
COM port and baud rate for your system, as shown in the following
figure.
<img alt="../../_images/image44.png" src="../../_images/image44.png" /></p></li>
<li><p>For port settings, verify COM port in the device manager and select
the COM port with interface-0.</p></li>
<li><p>Turn on the ZCU102 Board using SW1, and wait until Linux loads on
the board.</p></li>
</ol>
</div>
<div class="section" id="create-linux-images-using-petalinux-for-qspi-flash">
<h2>Create Linux Images Using PetaLinux for QSPI Flash<a class="headerlink" href="#create-linux-images-using-petalinux-for-qspi-flash" title="Permalink to this headline">¶</a></h2>
<p>The earlier example highlighted creation of the Linux Images and Boot
images to boot from an SD card. This section explains the
configuration of PetaLinux to generate Linux images for QSPI flash.
For more information about the dependencies for PetaLinux 2020.2, see
the <em>PetaLinux Tools Documentation: Reference Guide</em>
(<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest%3Bd%3Dug1144-petalinux-tools-reference-guide.pdf">UG1144</a>).</p>
<ol>
<li><p>Before starting this example, create a backup of the boot images
created for SD card setup using the following commands:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> &lt;Petalinux-project-path&gt;/xilinx-zcu102-2020.2/images/linux/
$ mkdir sd_boot
$ cp image.ub sd_boot/
$ cp u-boot.elf sd_boot/
$ cp BOOT.BIN sd_boot/
</pre></div>
</div>
</li>
<li><p>Change the directory to the PetaLinux Project root directory:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">cd</span> <span class="pre">\&lt;Petalinux-project-path\/xilinx-zcu102-2020.2</span></code></p>
</li>
<li><p>Launch the top level system configuration menu:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-config</span></code></p>
<p>The Configuration wizard opens.</p>
</li>
<li><p>Select Subsystem AUTO Hardware Settings.</p></li>
<li><p>Under the Advanced bootable images storage Settings, do the
following.</p>
<p>a.  Select <strong>boot image settings</strong>.</p>
<p>b.  Select <strong>image storage media</strong>.</p>
<p>c.  Select <strong>primary flash</strong> as the boot device.</p>
</li>
<li><p>Under the Advanced bootable images storage Settings submenu, do the
following:</p>
<p>a.  Select <strong>kernel image settings</strong>.</p>
<p>b.  Select <strong>image storage media</strong>.</p>
<p>c.  Select <strong>primary flash</strong> as the storage device.</p>
</li>
<li><p>One level above, that is, under Subsystem AUTO Hardware Settings, do
the following:</p>
<p>a.  Select <strong>Flash Settings</strong> and notice the entries listed in the
partition table.</p>
<blockquote>
<div><p><strong><em>Note</em>:</strong> Some memory (0x1E00000 + 0x40000) is set aside for initial
Boot partitions and U-Boot settings. These values can be modified on
need basis.</p>
</div></blockquote>
<p>b.  Based on this, the offset for Linux Images is calculated as
0x1E40000 in QSPI Flash device. This will be used in <a class="reference external" href="6-boot-and-configuration">Boot and Configuration</a>, while creating Boot image
for QSPI Boot-mode.</p>
<p>The following steps will set the Linux System Memory Size to about
1.79 GB.</p>
</li>
<li><p>Under Subsystem AUTO Hardware Settings, do the following:</p>
<p>a.  Select <strong>Memory Settings</strong>.</p>
<p>b.  Set <strong>System Memory Size</strong> to <code class="docutils literal notranslate"><span class="pre">0x6FFFFFFF</span></code>.</p>
</li>
<li><p>Save the configuration settings and exit the Configuration wizard.</p></li>
<li><p>Rebuild using the <code class="docutils literal notranslate"><span class="pre">petalinux-build</span></code> command.</p></li>
<li><p>Take a backup of u-boot.elf and the other images. These will be used
in <a class="reference external" href="6-boot-and-configuration">Boot and Configuration</a>.</p></li>
</ol>
<p><strong><em>Note</em>:</strong> For more information, refer to the <em>PetaLinux Tools
Documentation: Reference Guide</em>
(<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest%3Bd%3Dug1144-petalinux-tools-reference-guide.pdf">UG1144</a>).</p>
<p>In this chapter, you learned how to configure and compile software
blocks for Zynq UltraScale+ devices using Xilinx tools. You will use
these images in <a class="reference external" href="7-system-design-examples">System Design Examples</a> to
create Boot images for a specific design example.</p>
<p>Next, you will debug software for Zynq UltraScale+ devices using the
Vitis IDE in <a class="reference external" href="5-debugging-with-vitis-debugger">Debugging with the Vitis
Debugger</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 19, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>